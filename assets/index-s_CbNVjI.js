var vo=o=>{throw TypeError(o)};var mo=(o,i,s)=>i.has(o)||vo("Cannot "+s);var ln=(o,i,s)=>(mo(o,i,"read from private field"),s?s.call(o):i.get(o)),go=(o,i,s)=>i.has(o)?vo("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(o):i.set(o,s),bo=(o,i,s,c)=>(mo(o,i,"write to private field"),c?c.call(o,s):i.set(o,s),s);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))c(h);new MutationObserver(h=>{for(const v of h)if(v.type==="childList")for(const O of v.addedNodes)O.tagName==="LINK"&&O.rel==="modulepreload"&&c(O)}).observe(document,{childList:!0,subtree:!0});function s(h){const v={};return h.integrity&&(v.integrity=h.integrity),h.referrerPolicy&&(v.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?v.credentials="include":h.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function c(h){if(h.ep)return;h.ep=!0;const v=s(h);fetch(h.href,v)}})();var zn,W,Ho,fn,wo,Vo,br,Sr,wr,kr,Wo,Wn={},zo=[],eu=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Kt=Array.isArray;function je(o,i){for(var s in i)o[s]=i[s];return o}function Yo(o){o&&o.parentNode&&o.parentNode.removeChild(o)}function Be(o,i,s){var c,h,v,O={};for(v in i)v=="key"?c=i[v]:v=="ref"?h=i[v]:O[v]=i[v];if(arguments.length>2&&(O.children=arguments.length>3?zn.call(arguments,2):s),typeof o=="function"&&o.defaultProps!=null)for(v in o.defaultProps)O[v]===void 0&&(O[v]=o.defaultProps[v]);return Vn(o,O,c,h,null)}function Vn(o,i,s,c,h){var v={type:o,props:i,key:s,ref:c,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:h??++Ho,__i:-1,__u:0};return h==null&&W.vnode!=null&&W.vnode(v),v}function nu(){return{current:null}}function Ae(o){return o.children}function Ke(o,i){this.props=o,this.context=i}function kn(o,i){if(i==null)return o.__?kn(o.__,o.__i+1):null;for(var s;i<o.__k.length;i++)if((s=o.__k[i])!=null&&s.__e!=null)return s.__e;return typeof o.type=="function"?kn(o):null}function Go(o){var i,s;if((o=o.__)!=null&&o.__c!=null){for(o.__e=o.__c.base=null,i=0;i<o.__k.length;i++)if((s=o.__k[i])!=null&&s.__e!=null){o.__e=o.__c.base=s.__e;break}return Go(o)}}function xr(o){(!o.__d&&(o.__d=!0)&&fn.push(o)&&!Ot.__r++||wo!==W.debounceRendering)&&((wo=W.debounceRendering)||Vo)(Ot)}function Ot(){var o,i,s,c,h,v,O,K;for(fn.sort(br);o=fn.shift();)o.__d&&(i=fn.length,c=void 0,v=(h=(s=o).__v).__e,O=[],K=[],s.__P&&((c=je({},h)).__v=h.__v+1,W.vnode&&W.vnode(c),Kr(s.__P,c,h,s.__n,s.__P.namespaceURI,32&h.__u?[v]:null,O,v??kn(h),!!(32&h.__u),K),c.__v=h.__v,c.__.__k[c.__i]=c,Zo(O,c,K),c.__e!=v&&Go(c)),fn.length>i&&fn.sort(br));Ot.__r=0}function Qo(o,i,s,c,h,v,O,K,D,A,H){var C,X,U,ne,le,ce=c&&c.__k||zo,te=i.length;for(s.__d=D,tu(s,i,ce),D=s.__d,C=0;C<te;C++)(U=s.__k[C])!=null&&(X=U.__i===-1?Wn:ce[U.__i]||Wn,U.__i=C,Kr(o,U,X,h,v,O,K,D,A,H),ne=U.__e,U.ref&&X.ref!=U.ref&&(X.ref&&Ar(X.ref,null,U),H.push(U.ref,U.__c||ne,U)),le==null&&ne!=null&&(le=ne),65536&U.__u||X.__k===U.__k?D=Xo(U,D,o):typeof U.type=="function"&&U.__d!==void 0?D=U.__d:ne&&(D=ne.nextSibling),U.__d=void 0,U.__u&=-196609);s.__d=D,s.__e=le}function tu(o,i,s){var c,h,v,O,K,D=i.length,A=s.length,H=A,C=0;for(o.__k=[],c=0;c<D;c++)(h=i[c])!=null&&typeof h!="boolean"&&typeof h!="function"?(O=c+C,(h=o.__k[c]=typeof h=="string"||typeof h=="number"||typeof h=="bigint"||h.constructor==String?Vn(null,h,null,null,null):Kt(h)?Vn(Ae,{children:h},null,null,null):h.constructor===void 0&&h.__b>0?Vn(h.type,h.props,h.key,h.ref?h.ref:null,h.__v):h).__=o,h.__b=o.__b+1,v=null,(K=h.__i=ru(h,s,O,H))!==-1&&(H--,(v=s[K])&&(v.__u|=131072)),v==null||v.__v===null?(K==-1&&C--,typeof h.type!="function"&&(h.__u|=65536)):K!==O&&(K==O-1?C--:K==O+1?C++:(K>O?C--:C++,h.__u|=65536))):h=o.__k[c]=null;if(H)for(c=0;c<A;c++)(v=s[c])!=null&&!(131072&v.__u)&&(v.__e==o.__d&&(o.__d=kn(v)),Jo(v,v))}function Xo(o,i,s){var c,h;if(typeof o.type=="function"){for(c=o.__k,h=0;c&&h<c.length;h++)c[h]&&(c[h].__=o,i=Xo(c[h],i,s));return i}o.__e!=i&&(i&&o.type&&!s.contains(i)&&(i=kn(o)),s.insertBefore(o.__e,i||null),i=o.__e);do i=i&&i.nextSibling;while(i!=null&&i.nodeType===8);return i}function Re(o,i){return i=i||[],o==null||typeof o=="boolean"||(Kt(o)?o.some(function(s){Re(s,i)}):i.push(o)),i}function ru(o,i,s,c){var h=o.key,v=o.type,O=s-1,K=s+1,D=i[s];if(D===null||D&&h==D.key&&v===D.type&&!(131072&D.__u))return s;if(c>(D!=null&&!(131072&D.__u)?1:0))for(;O>=0||K<i.length;){if(O>=0){if((D=i[O])&&!(131072&D.__u)&&h==D.key&&v===D.type)return O;O--}if(K<i.length){if((D=i[K])&&!(131072&D.__u)&&h==D.key&&v===D.type)return K;K++}}return-1}function ko(o,i,s){i[0]==="-"?o.setProperty(i,s??""):o[i]=s==null?"":typeof s!="number"||eu.test(i)?s:s+"px"}function Et(o,i,s,c,h){var v;e:if(i==="style")if(typeof s=="string")o.style.cssText=s;else{if(typeof c=="string"&&(o.style.cssText=c=""),c)for(i in c)s&&i in s||ko(o.style,i,"");if(s)for(i in s)c&&s[i]===c[i]||ko(o.style,i,s[i])}else if(i[0]==="o"&&i[1]==="n")v=i!==(i=i.replace(/(PointerCapture)$|Capture$/i,"$1")),i=i.toLowerCase()in o||i==="onFocusOut"||i==="onFocusIn"?i.toLowerCase().slice(2):i.slice(2),o.l||(o.l={}),o.l[i+v]=s,s?c?s.u=c.u:(s.u=Sr,o.addEventListener(i,v?kr:wr,v)):o.removeEventListener(i,v?kr:wr,v);else{if(h=="http://www.w3.org/2000/svg")i=i.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(i!="width"&&i!="height"&&i!="href"&&i!="list"&&i!="form"&&i!="tabIndex"&&i!="download"&&i!="rowSpan"&&i!="colSpan"&&i!="role"&&i!="popover"&&i in o)try{o[i]=s??"";break e}catch{}typeof s=="function"||(s==null||s===!1&&i[4]!=="-"?o.removeAttribute(i):o.setAttribute(i,i=="popover"&&s==1?"":s))}}function xo(o){return function(i){if(this.l){var s=this.l[i.type+o];if(i.t==null)i.t=Sr++;else if(i.t<s.u)return;return s(W.event?W.event(i):i)}}}function Kr(o,i,s,c,h,v,O,K,D,A){var H,C,X,U,ne,le,ce,te,J,qe,ge,Ye,ve,de,Ge,On,be=i.type;if(i.constructor!==void 0)return null;128&s.__u&&(D=!!(32&s.__u),v=[K=i.__e=s.__e]),(H=W.__b)&&H(i);e:if(typeof be=="function")try{if(te=i.props,J="prototype"in be&&be.prototype.render,qe=(H=be.contextType)&&c[H.__c],ge=H?qe?qe.props.value:H.__:c,s.__c?ce=(C=i.__c=s.__c).__=C.__E:(J?i.__c=C=new be(te,ge):(i.__c=C=new Ke(te,ge),C.constructor=be,C.render=iu),qe&&qe.sub(C),C.props=te,C.state||(C.state={}),C.context=ge,C.__n=c,X=C.__d=!0,C.__h=[],C._sb=[]),J&&C.__s==null&&(C.__s=C.state),J&&be.getDerivedStateFromProps!=null&&(C.__s==C.state&&(C.__s=je({},C.__s)),je(C.__s,be.getDerivedStateFromProps(te,C.__s))),U=C.props,ne=C.state,C.__v=i,X)J&&be.getDerivedStateFromProps==null&&C.componentWillMount!=null&&C.componentWillMount(),J&&C.componentDidMount!=null&&C.__h.push(C.componentDidMount);else{if(J&&be.getDerivedStateFromProps==null&&te!==U&&C.componentWillReceiveProps!=null&&C.componentWillReceiveProps(te,ge),!C.__e&&(C.shouldComponentUpdate!=null&&C.shouldComponentUpdate(te,C.__s,ge)===!1||i.__v===s.__v)){for(i.__v!==s.__v&&(C.props=te,C.state=C.__s,C.__d=!1),i.__e=s.__e,i.__k=s.__k,i.__k.some(function(Qe){Qe&&(Qe.__=i)}),Ye=0;Ye<C._sb.length;Ye++)C.__h.push(C._sb[Ye]);C._sb=[],C.__h.length&&O.push(C);break e}C.componentWillUpdate!=null&&C.componentWillUpdate(te,C.__s,ge),J&&C.componentDidUpdate!=null&&C.__h.push(function(){C.componentDidUpdate(U,ne,le)})}if(C.context=ge,C.props=te,C.__P=o,C.__e=!1,ve=W.__r,de=0,J){for(C.state=C.__s,C.__d=!1,ve&&ve(i),H=C.render(C.props,C.state,C.context),Ge=0;Ge<C._sb.length;Ge++)C.__h.push(C._sb[Ge]);C._sb=[]}else do C.__d=!1,ve&&ve(i),H=C.render(C.props,C.state,C.context),C.state=C.__s;while(C.__d&&++de<25);C.state=C.__s,C.getChildContext!=null&&(c=je(je({},c),C.getChildContext())),J&&!X&&C.getSnapshotBeforeUpdate!=null&&(le=C.getSnapshotBeforeUpdate(U,ne)),Qo(o,Kt(On=H!=null&&H.type===Ae&&H.key==null?H.props.children:H)?On:[On],i,s,c,h,v,O,K,D,A),C.base=i.__e,i.__u&=-161,C.__h.length&&O.push(C),ce&&(C.__E=C.__=null)}catch(Qe){if(i.__v=null,D||v!=null){for(i.__u|=D?160:128;K&&K.nodeType===8&&K.nextSibling;)K=K.nextSibling;v[v.indexOf(K)]=null,i.__e=K}else i.__e=s.__e,i.__k=s.__k;W.__e(Qe,i,s)}else v==null&&i.__v===s.__v?(i.__k=s.__k,i.__e=s.__e):i.__e=ou(s.__e,i,s,c,h,v,O,D,A);(H=W.diffed)&&H(i)}function Zo(o,i,s){i.__d=void 0;for(var c=0;c<s.length;c++)Ar(s[c],s[++c],s[++c]);W.__c&&W.__c(i,o),o.some(function(h){try{o=h.__h,h.__h=[],o.some(function(v){v.call(h)})}catch(v){W.__e(v,h.__v)}})}function ou(o,i,s,c,h,v,O,K,D){var A,H,C,X,U,ne,le,ce=s.props,te=i.props,J=i.type;if(J==="svg"?h="http://www.w3.org/2000/svg":J==="math"?h="http://www.w3.org/1998/Math/MathML":h||(h="http://www.w3.org/1999/xhtml"),v!=null){for(A=0;A<v.length;A++)if((U=v[A])&&"setAttribute"in U==!!J&&(J?U.localName===J:U.nodeType===3)){o=U,v[A]=null;break}}if(o==null){if(J===null)return document.createTextNode(te);o=document.createElementNS(h,J,te.is&&te),K&&(W.__m&&W.__m(i,v),K=!1),v=null}if(J===null)ce===te||K&&o.data===te||(o.data=te);else{if(v=v&&zn.call(o.childNodes),ce=s.props||Wn,!K&&v!=null)for(ce={},A=0;A<o.attributes.length;A++)ce[(U=o.attributes[A]).name]=U.value;for(A in ce)if(U=ce[A],A!="children"){if(A=="dangerouslySetInnerHTML")C=U;else if(!(A in te)){if(A=="value"&&"defaultValue"in te||A=="checked"&&"defaultChecked"in te)continue;Et(o,A,null,U,h)}}for(A in te)U=te[A],A=="children"?X=U:A=="dangerouslySetInnerHTML"?H=U:A=="value"?ne=U:A=="checked"?le=U:K&&typeof U!="function"||ce[A]===U||Et(o,A,U,ce[A],h);if(H)K||C&&(H.__html===C.__html||H.__html===o.innerHTML)||(o.innerHTML=H.__html),i.__k=[];else if(C&&(o.innerHTML=""),Qo(o,Kt(X)?X:[X],i,s,c,J==="foreignObject"?"http://www.w3.org/1999/xhtml":h,v,O,v?v[0]:s.__k&&kn(s,0),K,D),v!=null)for(A=v.length;A--;)Yo(v[A]);K||(A="value",J==="progress"&&ne==null?o.removeAttribute("value"):ne!==void 0&&(ne!==o[A]||J==="progress"&&!ne||J==="option"&&ne!==ce[A])&&Et(o,A,ne,ce[A],h),A="checked",le!==void 0&&le!==o[A]&&Et(o,A,le,ce[A],h))}return o}function Ar(o,i,s){try{if(typeof o=="function"){var c=typeof o.__u=="function";c&&o.__u(),c&&i==null||(o.__u=o(i))}else o.current=i}catch(h){W.__e(h,s)}}function Jo(o,i,s){var c,h;if(W.unmount&&W.unmount(o),(c=o.ref)&&(c.current&&c.current!==o.__e||Ar(c,null,i)),(c=o.__c)!=null){if(c.componentWillUnmount)try{c.componentWillUnmount()}catch(v){W.__e(v,i)}c.base=c.__P=null}if(c=o.__k)for(h=0;h<c.length;h++)c[h]&&Jo(c[h],i,s||typeof o.type!="function");s||Yo(o.__e),o.__c=o.__=o.__e=o.__d=void 0}function iu(o,i,s){return this.constructor(o,s)}function xn(o,i,s){var c,h,v,O;W.__&&W.__(o,i),h=(c=typeof s=="function")?null:s&&s.__k||i.__k,v=[],O=[],Kr(i,o=(!c&&s||i).__k=Be(Ae,null,[o]),h||Wn,Wn,i.namespaceURI,!c&&s?[s]:h?null:i.firstChild?zn.call(i.childNodes):null,v,!c&&s?s:h?h.__e:i.firstChild,c,O),Zo(v,o,O)}function ei(o,i){xn(o,i,ei)}function uu(o,i,s){var c,h,v,O,K=je({},o.props);for(v in o.type&&o.type.defaultProps&&(O=o.type.defaultProps),i)v=="key"?c=i[v]:v=="ref"?h=i[v]:K[v]=i[v]===void 0&&O!==void 0?O[v]:i[v];return arguments.length>2&&(K.children=arguments.length>3?zn.call(arguments,2):s),Vn(o.type,K,c||o.key,h||o.ref,null)}function au(o,i){var s={__c:i="__cC"+Wo++,__:o,Consumer:function(c,h){return c.children(h)},Provider:function(c){var h,v;return this.getChildContext||(h=new Set,(v={})[i]=this,this.getChildContext=function(){return v},this.componentWillUnmount=function(){h=null},this.shouldComponentUpdate=function(O){this.props.value!==O.value&&h.forEach(function(K){K.__e=!0,xr(K)})},this.sub=function(O){h.add(O);var K=O.componentWillUnmount;O.componentWillUnmount=function(){h&&h.delete(O),K&&K.call(O)}}),c.children}};return s.Provider.__=s.Consumer.contextType=s}zn=zo.slice,W={__e:function(o,i,s,c){for(var h,v,O;i=i.__;)if((h=i.__c)&&!h.__)try{if((v=h.constructor)&&v.getDerivedStateFromError!=null&&(h.setState(v.getDerivedStateFromError(o)),O=h.__d),h.componentDidCatch!=null&&(h.componentDidCatch(o,c||{}),O=h.__d),O)return h.__E=h}catch(K){o=K}throw o}},Ho=0,Ke.prototype.setState=function(o,i){var s;s=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=je({},this.state),typeof o=="function"&&(o=o(je({},s),this.props)),o&&je(s,o),o!=null&&this.__v&&(i&&this._sb.push(i),xr(this))},Ke.prototype.forceUpdate=function(o){this.__v&&(this.__e=!0,o&&this.__h.push(o),xr(this))},Ke.prototype.render=Ae,fn=[],Vo=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,br=function(o,i){return o.__v.__b-i.__v.__b},Ot.__r=0,Sr=0,wr=xo(!1),kr=xo(!0),Wo=0;var su=0;function $(o,i,s,c,h,v){i||(i={});var O,K,D=i;"ref"in i&&(O=i.ref,delete i.ref);var A={type:o,props:D,key:s,ref:O,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--su,__i:-1,__u:0,__source:h,__self:v};if(typeof o=="function"&&(O=o.defaultProps))for(K in O)D[K]===void 0&&(D[K]=O[K]);return W.vnode&&W.vnode(A),A}var ze,oe,mr,Eo,En=0,ni=[],ue=W,Po=ue.__b,Co=ue.__r,Oo=ue.diffed,So=ue.__c,Ko=ue.unmount,Ao=ue.__;function Cn(o,i){ue.__h&&ue.__h(oe,o,En||i),En=0;var s=oe.__H||(oe.__H={__:[],__h:[]});return o>=s.__.length&&s.__.push({}),s.__[o]}function Ee(o){return En=1,Nr(si,o)}function Nr(o,i,s){var c=Cn(ze++,2);if(c.t=o,!c.__c&&(c.__=[s?s(i):si(void 0,i),function(K){var D=c.__N?c.__N[0]:c.__[0],A=c.t(D,K);D!==A&&(c.__N=[A,c.__[1]],c.__c.setState({}))}],c.__c=oe,!oe.u)){var h=function(K,D,A){if(!c.__c.__H)return!0;var H=c.__c.__H.__.filter(function(X){return!!X.__c});if(H.every(function(X){return!X.__N}))return!v||v.call(this,K,D,A);var C=!1;return H.forEach(function(X){if(X.__N){var U=X.__[0];X.__=X.__N,X.__N=void 0,U!==X.__[0]&&(C=!0)}}),!(!C&&c.__c.props===K)&&(!v||v.call(this,K,D,A))};oe.u=!0;var v=oe.shouldComponentUpdate,O=oe.componentWillUpdate;oe.componentWillUpdate=function(K,D,A){if(this.__e){var H=v;v=void 0,h(K,D,A),v=H}O&&O.call(this,K,D,A)},oe.shouldComponentUpdate=h}return c.__N||c.__}function Yn(o,i){var s=Cn(ze++,3);!ue.__s&&Tr(s.__H,i)&&(s.__=o,s.i=i,oe.__H.__h.push(s))}function Gn(o,i){var s=Cn(ze++,4);!ue.__s&&Tr(s.__H,i)&&(s.__=o,s.i=i,oe.__h.push(s))}function ti(o){return En=5,At(function(){return{current:o}},[])}function ri(o,i,s){En=6,Gn(function(){return typeof o=="function"?(o(i()),function(){return o(null)}):o?(o.current=i(),function(){return o.current=null}):void 0},s==null?s:s.concat(o))}function At(o,i){var s=Cn(ze++,7);return Tr(s.__H,i)&&(s.__=o(),s.__H=i,s.__h=o),s.__}function oi(o,i){return En=8,At(function(){return o},i)}function ii(o){var i=oe.context[o.__c],s=Cn(ze++,9);return s.c=o,i?(s.__==null&&(s.__=!0,i.sub(oe)),i.props.value):o.__}function ui(o,i){ue.useDebugValue&&ue.useDebugValue(i?i(o):o)}function ai(){var o=Cn(ze++,11);if(!o.__){for(var i=oe.__v;i!==null&&!i.__m&&i.__!==null;)i=i.__;var s=i.__m||(i.__m=[0,0]);o.__="P"+s[0]+"-"+s[1]++}return o.__}function cu(){for(var o;o=ni.shift();)if(o.__P&&o.__H)try{o.__H.__h.forEach(Pt),o.__H.__h.forEach(Er),o.__H.__h=[]}catch(i){o.__H.__h=[],ue.__e(i,o.__v)}}ue.__b=function(o){oe=null,Po&&Po(o)},ue.__=function(o,i){o&&i.__k&&i.__k.__m&&(o.__m=i.__k.__m),Ao&&Ao(o,i)},ue.__r=function(o){Co&&Co(o),ze=0;var i=(oe=o.__c).__H;i&&(mr===oe?(i.__h=[],oe.__h=[],i.__.forEach(function(s){s.__N&&(s.__=s.__N),s.i=s.__N=void 0})):(i.__h.forEach(Pt),i.__h.forEach(Er),i.__h=[],ze=0)),mr=oe},ue.diffed=function(o){Oo&&Oo(o);var i=o.__c;i&&i.__H&&(i.__H.__h.length&&(ni.push(i)!==1&&Eo===ue.requestAnimationFrame||((Eo=ue.requestAnimationFrame)||lu)(cu)),i.__H.__.forEach(function(s){s.i&&(s.__H=s.i),s.i=void 0})),mr=oe=null},ue.__c=function(o,i){i.some(function(s){try{s.__h.forEach(Pt),s.__h=s.__h.filter(function(c){return!c.__||Er(c)})}catch(c){i.some(function(h){h.__h&&(h.__h=[])}),i=[],ue.__e(c,s.__v)}}),So&&So(o,i)},ue.unmount=function(o){Ko&&Ko(o);var i,s=o.__c;s&&s.__H&&(s.__H.__.forEach(function(c){try{Pt(c)}catch(h){i=h}}),s.__H=void 0,i&&ue.__e(i,s.__v))};var No=typeof requestAnimationFrame=="function";function lu(o){var i,s=function(){clearTimeout(c),No&&cancelAnimationFrame(i),setTimeout(o)},c=setTimeout(s,100);No&&(i=requestAnimationFrame(s))}function Pt(o){var i=oe,s=o.__c;typeof s=="function"&&(o.__c=void 0,s()),oe=i}function Er(o){var i=oe;o.__c=o.__(),oe=i}function Tr(o,i){return!o||o.length!==i.length||i.some(function(s,c){return s!==o[c]})}function si(o,i){return typeof i=="function"?i(o):i}function Ir({iconName:o}){return $("span",{class:"material-symbols-outlined",children:o})}function We({buttonContent:o,onClick:i,...s}){return $("div",{class:"IconButton",children:$("button",{type:"button",onClick:i,children:[$(Ir,{...s}),o]})})}const ci=[{name:"Grocery",iconName:"grocery"},{name:"Pets",iconName:"pets"},{name:"Household Essentials",iconName:"cleaning"},{name:"Health",iconName:"medication_liquid"},{name:"Beauty & Personal care",iconName:"health_and_beauty"},{name:"Entertainment",iconName:"videogame_asset"},{name:"Sports, Fitness & Outdoors",iconName:"sports_gymnastics"},{name:"Toys",iconName:"toys_and_games"},{name:"School & Office",iconName:"ink_highlighter"},{name:"Electronics",iconName:"computer"},{name:"Baby",iconName:"child_care"},{name:"Home & Patio",iconName:"home_and_garden"}];var To=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fu(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var li={exports:{}};(function(o,i){(function(s,c){o.exports=c()})(To,function(){var s=function(e,n){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u])})(e,n)},c=function(){return(c=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var u in n=arguments[t])Object.prototype.hasOwnProperty.call(n,u)&&(e[u]=n[u]);return e}).apply(this,arguments)};function h(e,n,t){for(var r,u=0,a=n.length;u<a;u++)!r&&u in n||((r=r||Array.prototype.slice.call(n,0,u))[u]=n[u]);return e.concat(r||Array.prototype.slice.call(n))}var v=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:To,O=Object.keys,K=Array.isArray;function D(e,n){return typeof n!="object"||O(n).forEach(function(t){e[t]=n[t]}),e}typeof Promise>"u"||v.Promise||(v.Promise=Promise);var A=Object.getPrototypeOf,H={}.hasOwnProperty;function C(e,n){return H.call(e,n)}function X(e,n){typeof n=="function"&&(n=n(A(e))),(typeof Reflect>"u"?O:Reflect.ownKeys)(n).forEach(function(t){ne(e,t,n[t])})}var U=Object.defineProperty;function ne(e,n,t,r){U(e,n,D(t&&C(t,"get")&&typeof t.get=="function"?{get:t.get,set:t.set,configurable:!0}:{value:t,configurable:!0,writable:!0},r))}function le(e){return{from:function(n){return e.prototype=Object.create(n.prototype),ne(e.prototype,"constructor",e),{extend:X.bind(null,e.prototype)}}}}var ce=Object.getOwnPropertyDescriptor,te=[].slice;function J(e,n,t){return te.call(e,n,t)}function qe(e,n){return n(e)}function ge(e){if(!e)throw new Error("Assertion Failed")}function Ye(e){v.setImmediate?setImmediate(e):setTimeout(e,0)}function ve(e,n){if(typeof n=="string"&&C(e,n))return e[n];if(!n)return e;if(typeof n!="string"){for(var t=[],r=0,u=n.length;r<u;++r){var a=ve(e,n[r]);t.push(a)}return t}var l=n.indexOf(".");if(l!==-1){var f=e[n.substr(0,l)];return f==null?void 0:ve(f,n.substr(l+1))}}function de(e,n,t){if(e&&n!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof n!="string"&&"length"in n){ge(typeof t!="string"&&"length"in t);for(var r=0,u=n.length;r<u;++r)de(e,n[r],t[r])}else{var a,l,f=n.indexOf(".");f!==-1?(a=n.substr(0,f),(l=n.substr(f+1))===""?t===void 0?K(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=t:de(f=!(f=e[a])||!C(e,a)?e[a]={}:f,l,t)):t===void 0?K(e)&&!isNaN(parseInt(n))?e.splice(n,1):delete e[n]:e[n]=t}}function Ge(e){var n,t={};for(n in e)C(e,n)&&(t[n]=e[n]);return t}var On=[].concat;function be(e){return On.apply([],e)}var Ie="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(be([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(n){return n+e+"Array"})}))).filter(function(e){return v[e]}),Qe=new Set(Ie.map(function(e){return v[e]})),Sn=null;function Xe(e){return Sn=new WeakMap,e=function n(t){if(!t||typeof t!="object")return t;var r=Sn.get(t);if(r)return r;if(K(t)){r=[],Sn.set(t,r);for(var u=0,a=t.length;u<a;++u)r.push(n(t[u]))}else if(Qe.has(t.constructor))r=t;else{var l,f=A(t);for(l in r=f===Object.prototype?{}:Object.create(f),Sn.set(t,r),t)C(t,l)&&(r[l]=n(t[l]))}return r}(e),Sn=null,e}var bi={}.toString;function Tt(e){return bi.call(e).slice(8,-1)}var It=typeof Symbol<"u"?Symbol.iterator:"@@iterator",wi=typeof It=="symbol"?function(e){var n;return e!=null&&(n=e[It])&&n.apply(e)}:function(){return null};function Ze(e,n){return n=e.indexOf(n),0<=n&&e.splice(n,1),0<=n}var hn={};function Ne(e){var n,t,r,u;if(arguments.length===1){if(K(e))return e.slice();if(this===hn&&typeof e=="string")return[e];if(u=wi(e)){for(t=[];!(r=u.next()).done;)t.push(r.value);return t}if(e==null)return[e];if(typeof(n=e.length)!="number")return[e];for(t=new Array(n);n--;)t[n]=e[n];return t}for(n=arguments.length,t=new Array(n);n--;)t[n]=arguments[n];return t}var Dt=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Nn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ke=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Nn),ki={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function dn(e,n){this.name=e,this.message=n}function jr(e,n){return e+". Errors: "+Object.keys(n).map(function(t){return n[t].toString()}).filter(function(t,r,u){return u.indexOf(t)===r}).join(`
`)}function Qn(e,n,t,r){this.failures=n,this.failedKeys=r,this.successCount=t,this.message=jr(e,n)}function pn(e,n){this.name="BulkError",this.failures=Object.keys(n).map(function(t){return n[t]}),this.failuresByPos=n,this.message=jr(e,this.failures)}le(dn).from(Error).extend({toString:function(){return this.name+": "+this.message}}),le(Qn).from(dn),le(pn).from(dn);var jt=ke.reduce(function(e,n){return e[n]=n+"Error",e},{}),xi=dn,L=ke.reduce(function(e,n){var t=n+"Error";function r(u,a){this.name=t,u?typeof u=="string"?(this.message="".concat(u).concat(a?`
 `+a:""),this.inner=a||null):typeof u=="object"&&(this.message="".concat(u.name," ").concat(u.message),this.inner=u):(this.message=ki[n]||t,this.inner=null)}return le(r).from(xi),e[n]=r,e},{});L.Syntax=SyntaxError,L.Type=TypeError,L.Range=RangeError;var Rr=Nn.reduce(function(e,n){return e[n+"Error"]=L[n],e},{}),Xn=ke.reduce(function(e,n){return["Syntax","Type","Range"].indexOf(n)===-1&&(e[n+"Error"]=L[n]),e},{});function ee(){}function Kn(e){return e}function Ei(e,n){return e==null||e===Kn?n:function(t){return n(e(t))}}function Je(e,n){return function(){e.apply(this,arguments),n.apply(this,arguments)}}function Pi(e,n){return e===ee?n:function(){var t=e.apply(this,arguments);t!==void 0&&(arguments[0]=t);var r=this.onsuccess,u=this.onerror;this.onsuccess=null,this.onerror=null;var a=n.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Je(r,this.onsuccess):r),u&&(this.onerror=this.onerror?Je(u,this.onerror):u),a!==void 0?a:t}}function Ci(e,n){return e===ee?n:function(){e.apply(this,arguments);var t=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),t&&(this.onsuccess=this.onsuccess?Je(t,this.onsuccess):t),r&&(this.onerror=this.onerror?Je(r,this.onerror):r)}}function Oi(e,n){return e===ee?n:function(t){var r=e.apply(this,arguments);D(t,r);var u=this.onsuccess,a=this.onerror;return this.onsuccess=null,this.onerror=null,t=n.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?Je(u,this.onsuccess):u),a&&(this.onerror=this.onerror?Je(a,this.onerror):a),r===void 0?t===void 0?void 0:t:D(r,t)}}function Si(e,n){return e===ee?n:function(){return n.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Rt(e,n){return e===ee?n:function(){var t=e.apply(this,arguments);if(t&&typeof t.then=="function"){for(var r=this,u=arguments.length,a=new Array(u);u--;)a[u]=arguments[u];return t.then(function(){return n.apply(r,a)})}return n.apply(this,arguments)}}Xn.ModifyError=Qn,Xn.DexieError=dn,Xn.BulkError=pn;var Pe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Br(e){Pe=e}var An={},qr=100,Ie=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,A(e),e];var n=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[n,A(n),e]}(),Nn=Ie[0],ke=Ie[1],Ie=Ie[2],ke=ke&&ke.then,en=Nn&&Nn.constructor,Bt=!!Ie,Tn=function(e,n){In.push([e,n]),Zn&&(queueMicrotask(Ai),Zn=!1)},qt=!0,Zn=!0,nn=[],Jn=[],Mt=Kn,Me={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ee,pgp:!1,env:{},finalize:ee},F=Me,In=[],tn=0,et=[];function q(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var n=this._PSD=F;if(typeof e!="function"){if(e!==An)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&$t(this,this._value))}this._state=null,this._value=null,++n.ref,function t(r,u){try{u(function(a){if(r._state===null){if(a===r)throw new TypeError("A promise cannot be resolved with itself.");var l=r._lib&&_n();a&&typeof a.then=="function"?t(r,function(f,p){a instanceof q?a._then(f,p):a.then(f,p)}):(r._state=!0,r._value=a,Fr(r)),l&&yn()}},$t.bind(null,r))}catch(a){$t(r,a)}}(this,e)}var Ft={get:function(){var e=F,n=ot;function t(r,u){var a=this,l=!e.global&&(e!==F||n!==ot),f=l&&!$e(),p=new q(function(y,b){Lt(a,new Mr(Lr(r,e,l,f),Lr(u,e,l,f),y,b,e))});return this._consoleTask&&(p._consoleTask=this._consoleTask),p}return t.prototype=An,t},set:function(e){ne(this,"then",e&&e.prototype===An?Ft:{get:function(){return e},set:Ft.set})}};function Mr(e,n,t,r,u){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof n=="function"?n:null,this.resolve=t,this.reject=r,this.psd=u}function $t(e,n){var t,r;Jn.push(n),e._state===null&&(t=e._lib&&_n(),n=Mt(n),e._state=!1,e._value=n,r=e,nn.some(function(u){return u._value===r._value})||nn.push(r),Fr(e),t&&yn())}function Fr(e){var n=e._listeners;e._listeners=[];for(var t=0,r=n.length;t<r;++t)Lt(e,n[t]);var u=e._PSD;--u.ref||u.finalize(),tn===0&&(++tn,Tn(function(){--tn==0&&Ut()},[]))}function Lt(e,n){if(e._state!==null){var t=e._state?n.onFulfilled:n.onRejected;if(t===null)return(e._state?n.resolve:n.reject)(e._value);++n.psd.ref,++tn,Tn(Ki,[t,e,n])}else e._listeners.push(n)}function Ki(e,n,t){try{var r,u=n._value;!n._state&&Jn.length&&(Jn=[]),r=Pe&&n._consoleTask?n._consoleTask.run(function(){return e(u)}):e(u),n._state||Jn.indexOf(u)!==-1||function(a){for(var l=nn.length;l;)if(nn[--l]._value===a._value)return nn.splice(l,1)}(n),t.resolve(r)}catch(a){t.reject(a)}finally{--tn==0&&Ut(),--t.psd.ref||t.psd.finalize()}}function Ai(){rn(Me,function(){_n()&&yn()})}function _n(){var e=qt;return Zn=qt=!1,e}function yn(){var e,n,t;do for(;0<In.length;)for(e=In,In=[],t=e.length,n=0;n<t;++n){var r=e[n];r[0].apply(null,r[1])}while(0<In.length);Zn=qt=!0}function Ut(){var e=nn;nn=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var n=et.slice(0),t=n.length;t;)n[--t]()}function nt(e){return new q(An,!1,e)}function ie(e,n){var t=F;return function(){var r=_n(),u=F;try{return Le(t,!0),e.apply(this,arguments)}catch(a){n&&n(a)}finally{Le(u,!1),r&&yn()}}}X(q.prototype,{then:Ft,_then:function(e,n){Lt(this,new Mr(null,null,e,n,F))},catch:function(e){if(arguments.length===1)return this.then(null,e);var n=e,t=arguments[1];return typeof n=="function"?this.then(null,function(r){return(r instanceof n?t:nt)(r)}):this.then(null,function(r){return(r&&r.name===n?t:nt)(r)})},finally:function(e){return this.then(function(n){return q.resolve(e()).then(function(){return n})},function(n){return q.resolve(e()).then(function(){return nt(n)})})},timeout:function(e,n){var t=this;return e<1/0?new q(function(r,u){var a=setTimeout(function(){return u(new L.Timeout(n))},e);t.then(r,u).finally(clearTimeout.bind(null,a))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&ne(q.prototype,Symbol.toStringTag,"Dexie.Promise"),Me.env=$r(),X(q,{all:function(){var e=Ne.apply(null,arguments).map(it);return new q(function(n,t){e.length===0&&n([]);var r=e.length;e.forEach(function(u,a){return q.resolve(u).then(function(l){e[a]=l,--r||n(e)},t)})})},resolve:function(e){return e instanceof q?e:e&&typeof e.then=="function"?new q(function(n,t){e.then(n,t)}):new q(An,!0,e)},reject:nt,race:function(){var e=Ne.apply(null,arguments).map(it);return new q(function(n,t){e.map(function(r){return q.resolve(r).then(n,t)})})},PSD:{get:function(){return F},set:function(e){return F=e}},totalEchoes:{get:function(){return ot}},newPSD:Fe,usePSD:rn,scheduler:{get:function(){return Tn},set:function(e){Tn=e}},rejectionMapper:{get:function(){return Mt},set:function(e){Mt=e}},follow:function(e,n){return new q(function(t,r){return Fe(function(u,a){var l=F;l.unhandleds=[],l.onunhandled=a,l.finalize=Je(function(){var f,p=this;f=function(){p.unhandleds.length===0?u():a(p.unhandleds[0])},et.push(function y(){f(),et.splice(et.indexOf(y),1)}),++tn,Tn(function(){--tn==0&&Ut()},[])},l.finalize),e()},n,t,r)})}}),en&&(en.allSettled&&ne(q,"allSettled",function(){var e=Ne.apply(null,arguments).map(it);return new q(function(n){e.length===0&&n([]);var t=e.length,r=new Array(t);e.forEach(function(u,a){return q.resolve(u).then(function(l){return r[a]={status:"fulfilled",value:l}},function(l){return r[a]={status:"rejected",reason:l}}).then(function(){return--t||n(r)})})})}),en.any&&typeof AggregateError<"u"&&ne(q,"any",function(){var e=Ne.apply(null,arguments).map(it);return new q(function(n,t){e.length===0&&t(new AggregateError([]));var r=e.length,u=new Array(r);e.forEach(function(a,l){return q.resolve(a).then(function(f){return n(f)},function(f){u[l]=f,--r||t(new AggregateError(u))})})})}),en.withResolvers&&(q.withResolvers=en.withResolvers));var fe={awaits:0,echoes:0,id:0},Ni=0,tt=[],rt=0,ot=0,Ti=0;function Fe(e,n,t,r){var u=F,a=Object.create(u);return a.parent=u,a.ref=0,a.global=!1,a.id=++Ti,Me.env,a.env=Bt?{Promise:q,PromiseProp:{value:q,configurable:!0,writable:!0},all:q.all,race:q.race,allSettled:q.allSettled,any:q.any,resolve:q.resolve,reject:q.reject}:{},n&&D(a,n),++u.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()},r=rn(a,e,t,r),a.ref===0&&a.finalize(),r}function vn(){return fe.id||(fe.id=++Ni),++fe.awaits,fe.echoes+=qr,fe.id}function $e(){return!!fe.awaits&&(--fe.awaits==0&&(fe.id=0),fe.echoes=fe.awaits*qr,!0)}function it(e){return fe.echoes&&e&&e.constructor===en?(vn(),e.then(function(n){return $e(),n},function(n){return $e(),ae(n)})):e}function Ii(){var e=tt[tt.length-1];tt.pop(),Le(e,!1)}function Le(e,n){var t,r=F;(n?!fe.echoes||rt++&&e===F:!rt||--rt&&e===F)||queueMicrotask(n?(function(u){++ot,fe.echoes&&--fe.echoes!=0||(fe.echoes=fe.awaits=fe.id=0),tt.push(F),Le(u,!0)}).bind(null,e):Ii),e!==F&&(F=e,r===Me&&(Me.env=$r()),Bt&&(t=Me.env.Promise,n=e.env,(r.global||e.global)&&(Object.defineProperty(v,"Promise",n.PromiseProp),t.all=n.all,t.race=n.race,t.resolve=n.resolve,t.reject=n.reject,n.allSettled&&(t.allSettled=n.allSettled),n.any&&(t.any=n.any))))}function $r(){var e=v.Promise;return Bt?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(v,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function rn(e,n,t,r,u){var a=F;try{return Le(e,!0),n(t,r,u)}finally{Le(a,!1)}}function Lr(e,n,t,r){return typeof e!="function"?e:function(){var u=F;t&&vn(),Le(n,!0);try{return e.apply(this,arguments)}finally{Le(u,!1),r&&queueMicrotask($e)}}}function Ht(e){Promise===en&&fe.echoes===0?rt===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+ke).indexOf("[native code]")===-1&&(vn=$e=ee);var ae=q.reject,on="￿",Te="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ur="String expected.",mn=[],ut="__dbnames",Vt="readonly",Wt="readwrite";function un(e,n){return e?n?function(){return e.apply(this,arguments)&&n.apply(this,arguments)}:e:n}var Hr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function at(e){return typeof e!="string"||/\./.test(e)?function(n){return n}:function(n){return n[e]===void 0&&e in n&&delete(n=Xe(n))[e],n}}function Vr(){throw L.Type()}function Q(e,n){try{var t=Wr(e),r=Wr(n);if(t!==r)return t==="Array"?1:r==="Array"?-1:t==="binary"?1:r==="binary"?-1:t==="string"?1:r==="string"?-1:t==="Date"?1:r!=="Date"?NaN:-1;switch(t){case"number":case"Date":case"string":return n<e?1:e<n?-1:0;case"binary":return function(u,a){for(var l=u.length,f=a.length,p=l<f?l:f,y=0;y<p;++y)if(u[y]!==a[y])return u[y]<a[y]?-1:1;return l===f?0:l<f?-1:1}(zr(e),zr(n));case"Array":return function(u,a){for(var l=u.length,f=a.length,p=l<f?l:f,y=0;y<p;++y){var b=Q(u[y],a[y]);if(b!==0)return b}return l===f?0:l<f?-1:1}(e,n)}}catch{}return NaN}function Wr(e){var n=typeof e;return n!="object"?n:ArrayBuffer.isView(e)?"binary":(e=Tt(e),e==="ArrayBuffer"?"binary":e)}function zr(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Yr=(re.prototype._trans=function(e,n,t){var r=this._tx||F.trans,u=this.name,a=Pe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function l(y,b,d){if(!d.schema[u])throw new L.NotFound("Table "+u+" not part of transaction");return n(d.idbtrans,d)}var f=_n();try{var p=r&&r.db._novip===this.db._novip?r===F.trans?r._promise(e,l,t):Fe(function(){return r._promise(e,l,t)},{trans:r,transless:F.transless||F}):function y(b,d,k,_){if(b.idbdb&&(b._state.openComplete||F.letThrough||b._vip)){var g=b._createTransaction(d,k,b._dbSchema);try{g.create(),b._state.PR1398_maxLoop=3}catch(w){return w.name===jt.InvalidState&&b.isOpen()&&0<--b._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),b.close({disableAutoOpen:!1}),b.open().then(function(){return y(b,d,k,_)})):ae(w)}return g._promise(d,function(w,m){return Fe(function(){return F.trans=g,_(w,m,g)})}).then(function(w){if(d==="readwrite")try{g.idbtrans.commit()}catch{}return d==="readonly"?w:g._completion.then(function(){return w})})}if(b._state.openComplete)return ae(new L.DatabaseClosed(b._state.dbOpenError));if(!b._state.isBeingOpened){if(!b._state.autoOpen)return ae(new L.DatabaseClosed);b.open().catch(ee)}return b._state.dbReadyPromise.then(function(){return y(b,d,k,_)})}(this.db,e,[this.name],l);return a&&(p._consoleTask=a,p=p.catch(function(y){return console.trace(y),ae(y)})),p}finally{f&&yn()}},re.prototype.get=function(e,n){var t=this;return e&&e.constructor===Object?this.where(e).first(n):e==null?ae(new L.Type("Invalid argument to Table.get()")):this._trans("readonly",function(r){return t.core.get({trans:r,key:e}).then(function(u){return t.hook.reading.fire(u)})}).then(n)},re.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(K(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var n=O(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);var t=this.schema.indexes.concat(this.schema.primKey).filter(function(f){if(f.compound&&n.every(function(y){return 0<=f.keyPath.indexOf(y)})){for(var p=0;p<n.length;++p)if(n.indexOf(f.keyPath[p])===-1)return!1;return!0}return!1}).sort(function(f,p){return f.keyPath.length-p.keyPath.length})[0];if(t&&this.db._maxKey!==on){var a=t.keyPath.slice(0,n.length);return this.where(a).equals(a.map(function(p){return e[p]}))}!t&&Pe&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(n.join("+"),"]"));var r=this.schema.idxByName;function u(f,p){return Q(f,p)===0}var l=n.reduce(function(d,p){var y=d[0],b=d[1],d=r[p],k=e[p];return[y||d,y||!d?un(b,d&&d.multi?function(_){return _=ve(_,p),K(_)&&_.some(function(g){return u(k,g)})}:function(_){return u(k,ve(_,p))}):b]},[null,null]),a=l[0],l=l[1];return a?this.where(a.name).equals(e[a.keyPath]).filter(l):t?this.filter(l):this.where(n).equals("")},re.prototype.filter=function(e){return this.toCollection().and(e)},re.prototype.count=function(e){return this.toCollection().count(e)},re.prototype.offset=function(e){return this.toCollection().offset(e)},re.prototype.limit=function(e){return this.toCollection().limit(e)},re.prototype.each=function(e){return this.toCollection().each(e)},re.prototype.toArray=function(e){return this.toCollection().toArray(e)},re.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},re.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,K(e)?"[".concat(e.join("+"),"]"):e))},re.prototype.reverse=function(){return this.toCollection().reverse()},re.prototype.mapToClass=function(e){var n,t=this.db,r=this.name;function u(){return n!==null&&n.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof Vr&&(function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function b(){this.constructor=p}s(p,y),p.prototype=y===null?Object.create(y):(b.prototype=y.prototype,new b)}(u,n=e),Object.defineProperty(u.prototype,"db",{get:function(){return t},enumerable:!1,configurable:!0}),u.prototype.table=function(){return r},e=u);for(var a=new Set,l=e.prototype;l;l=A(l))Object.getOwnPropertyNames(l).forEach(function(p){return a.add(p)});function f(p){if(!p)return p;var y,b=Object.create(e.prototype);for(y in p)if(!a.has(y))try{b[y]=p[y]}catch{}return b}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=f,this.hook("reading",f),e},re.prototype.defineClass=function(){return this.mapToClass(function(e){D(this,e)})},re.prototype.add=function(e,n){var t=this,r=this.schema.primKey,u=r.auto,a=r.keyPath,l=e;return a&&u&&(l=at(a)(e)),this._trans("readwrite",function(f){return t.core.mutate({trans:f,type:"add",keys:n!=null?[n]:null,values:[l]})}).then(function(f){return f.numFailures?q.reject(f.failures[0]):f.lastResult}).then(function(f){if(a)try{de(e,a,f)}catch{}return f})},re.prototype.update=function(e,n){return typeof e!="object"||K(e)?this.where(":id").equals(e).modify(n):(e=ve(e,this.schema.primKey.keyPath),e===void 0?ae(new L.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(n))},re.prototype.put=function(e,n){var t=this,r=this.schema.primKey,u=r.auto,a=r.keyPath,l=e;return a&&u&&(l=at(a)(e)),this._trans("readwrite",function(f){return t.core.mutate({trans:f,type:"put",values:[l],keys:n!=null?[n]:null})}).then(function(f){return f.numFailures?q.reject(f.failures[0]):f.lastResult}).then(function(f){if(a)try{de(e,a,f)}catch{}return f})},re.prototype.delete=function(e){var n=this;return this._trans("readwrite",function(t){return n.core.mutate({trans:t,type:"delete",keys:[e]})}).then(function(t){return t.numFailures?q.reject(t.failures[0]):void 0})},re.prototype.clear=function(){var e=this;return this._trans("readwrite",function(n){return e.core.mutate({trans:n,type:"deleteRange",range:Hr})}).then(function(n){return n.numFailures?q.reject(n.failures[0]):void 0})},re.prototype.bulkGet=function(e){var n=this;return this._trans("readonly",function(t){return n.core.getMany({keys:e,trans:t}).then(function(r){return r.map(function(u){return n.hook.reading.fire(u)})})})},re.prototype.bulkAdd=function(e,n,t){var r=this,u=Array.isArray(n)?n:void 0,a=(t=t||(u?void 0:n))?t.allKeys:void 0;return this._trans("readwrite",function(l){var y=r.schema.primKey,f=y.auto,y=y.keyPath;if(y&&u)throw new L.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(u&&u.length!==e.length)throw new L.InvalidArgument("Arguments objects and keys must have the same length");var p=e.length,y=y&&f?e.map(at(y)):e;return r.core.mutate({trans:l,type:"add",keys:u,values:y,wantResults:a}).then(function(g){var d=g.numFailures,k=g.results,_=g.lastResult,g=g.failures;if(d===0)return a?k:_;throw new pn("".concat(r.name,".bulkAdd(): ").concat(d," of ").concat(p," operations failed"),g)})})},re.prototype.bulkPut=function(e,n,t){var r=this,u=Array.isArray(n)?n:void 0,a=(t=t||(u?void 0:n))?t.allKeys:void 0;return this._trans("readwrite",function(l){var y=r.schema.primKey,f=y.auto,y=y.keyPath;if(y&&u)throw new L.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(u&&u.length!==e.length)throw new L.InvalidArgument("Arguments objects and keys must have the same length");var p=e.length,y=y&&f?e.map(at(y)):e;return r.core.mutate({trans:l,type:"put",keys:u,values:y,wantResults:a}).then(function(g){var d=g.numFailures,k=g.results,_=g.lastResult,g=g.failures;if(d===0)return a?k:_;throw new pn("".concat(r.name,".bulkPut(): ").concat(d," of ").concat(p," operations failed"),g)})})},re.prototype.bulkUpdate=function(e){var n=this,t=this.core,r=e.map(function(l){return l.key}),u=e.map(function(l){return l.changes}),a=[];return this._trans("readwrite",function(l){return t.getMany({trans:l,keys:r,cache:"clone"}).then(function(f){var p=[],y=[];e.forEach(function(d,k){var _=d.key,g=d.changes,w=f[k];if(w){for(var m=0,x=Object.keys(g);m<x.length;m++){var E=x[m],P=g[E];if(E===n.schema.primKey.keyPath){if(Q(P,_)!==0)throw new L.Constraint("Cannot update primary key in bulkUpdate()")}else de(w,E,P)}a.push(k),p.push(_),y.push(w)}});var b=p.length;return t.mutate({trans:l,type:"put",keys:p,values:y,updates:{keys:r,changeSpecs:u}}).then(function(d){var k=d.numFailures,_=d.failures;if(k===0)return b;for(var g=0,w=Object.keys(_);g<w.length;g++){var m,x=w[g],E=a[Number(x)];E!=null&&(m=_[x],delete _[x],_[E]=m)}throw new pn("".concat(n.name,".bulkUpdate(): ").concat(k," of ").concat(b," operations failed"),_)})})})},re.prototype.bulkDelete=function(e){var n=this,t=e.length;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:e})}).then(function(l){var u=l.numFailures,a=l.lastResult,l=l.failures;if(u===0)return a;throw new pn("".concat(n.name,".bulkDelete(): ").concat(u," of ").concat(t," operations failed"),l)})},re);function re(){}function Dn(e){function n(l,f){if(f){for(var p=arguments.length,y=new Array(p-1);--p;)y[p-1]=arguments[p];return t[l].subscribe.apply(null,y),e}if(typeof l=="string")return t[l]}var t={};n.addEventType=a;for(var r=1,u=arguments.length;r<u;++r)a(arguments[r]);return n;function a(l,f,p){if(typeof l!="object"){var y;f=f||Si;var b={subscribers:[],fire:p=p||ee,subscribe:function(d){b.subscribers.indexOf(d)===-1&&(b.subscribers.push(d),b.fire=f(b.fire,d))},unsubscribe:function(d){b.subscribers=b.subscribers.filter(function(k){return k!==d}),b.fire=b.subscribers.reduce(f,p)}};return t[l]=n[l]=b}O(y=l).forEach(function(d){var k=y[d];if(K(k))a(d,y[d][0],y[d][1]);else{if(k!=="asap")throw new L.InvalidArgument("Invalid event config");var _=a(d,Kn,function(){for(var g=arguments.length,w=new Array(g);g--;)w[g]=arguments[g];_.subscribers.forEach(function(m){Ye(function(){m.apply(null,w)})})})}})}}function jn(e,n){return le(n).from({prototype:e}),n}function gn(e,n){return!(e.filter||e.algorithm||e.or)&&(n?e.justLimit:!e.replayFilter)}function zt(e,n){e.filter=un(e.filter,n)}function Yt(e,n,t){var r=e.replayFilter;e.replayFilter=r?function(){return un(r(),n())}:n,e.justLimit=t&&!r}function st(e,n){if(e.isPrimKey)return n.primaryKey;var t=n.getIndexByKeyPath(e.index);if(!t)throw new L.Schema("KeyPath "+e.index+" on object store "+n.name+" is not indexed");return t}function Gr(e,n,t){var r=st(e,n.schema);return n.openCursor({trans:t,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function ct(e,n,t,r){var u=e.replayFilter?un(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},l=function(f,p,y){var b,d;u&&!u(p,y,function(k){return p.stop(k)},function(k){return p.fail(k)})||((d=""+(b=p.primaryKey))=="[object ArrayBuffer]"&&(d=""+new Uint8Array(b)),C(a,d)||(a[d]=!0,n(f,p,y)))};return Promise.all([e.or._iterate(l,t),Qr(Gr(e,r,t),e.algorithm,l,!e.keysOnly&&e.valueMapper)])}return Qr(Gr(e,r,t),un(e.algorithm,u),n,!e.keysOnly&&e.valueMapper)}function Qr(e,n,t,r){var u=ie(r?function(a,l,f){return t(r(a),l,f)}:t);return e.then(function(a){if(a)return a.start(function(){var l=function(){return a.continue()};n&&!n(a,function(f){return l=f},function(f){a.stop(f),l=ee},function(f){a.fail(f),l=ee})||u(a.value,a,function(f){return l=f}),l()})})}var Ie=Symbol(),Rn=(Xr.prototype.execute=function(e){if(this.add!==void 0){var n=this.add;if(K(n))return h(h([],K(e)?e:[],!0),n).sort();if(typeof n=="number")return(Number(e)||0)+n;if(typeof n=="bigint")try{return BigInt(e)+n}catch{return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(this.remove!==void 0){var t=this.remove;if(K(t))return K(e)?e.filter(function(r){return!t.includes(r)}).sort():[];if(typeof t=="number")return Number(e)-t;if(typeof t=="bigint")try{return BigInt(e)-t}catch{return BigInt(0)-t}throw new TypeError("Invalid subtrahend ".concat(t))}return n=(n=this.replacePrefix)===null||n===void 0?void 0:n[0],n&&typeof e=="string"&&e.startsWith(n)?this.replacePrefix[1]+e.substring(n.length):e},Xr);function Xr(e){Object.assign(this,e)}var Di=(Z.prototype._read=function(e,n){var t=this._ctx;return t.error?t.table._trans(null,ae.bind(null,t.error)):t.table._trans("readonly",e).then(n)},Z.prototype._write=function(e){var n=this._ctx;return n.error?n.table._trans(null,ae.bind(null,n.error)):n.table._trans("readwrite",e,"locked")},Z.prototype._addAlgorithm=function(e){var n=this._ctx;n.algorithm=un(n.algorithm,e)},Z.prototype._iterate=function(e,n){return ct(this._ctx,e,n,this._ctx.table.core)},Z.prototype.clone=function(e){var n=Object.create(this.constructor.prototype),t=Object.create(this._ctx);return e&&D(t,e),n._ctx=t,n},Z.prototype.raw=function(){return this._ctx.valueMapper=null,this},Z.prototype.each=function(e){var n=this._ctx;return this._read(function(t){return ct(n,e,t,n.table.core)})},Z.prototype.count=function(e){var n=this;return this._read(function(t){var r=n._ctx,u=r.table.core;if(gn(r,!0))return u.count({trans:t,query:{index:st(r,u.schema),range:r.range}}).then(function(l){return Math.min(l,r.limit)});var a=0;return ct(r,function(){return++a,!1},t,u).then(function(){return a})}).then(e)},Z.prototype.sortBy=function(e,n){var t=e.split(".").reverse(),r=t[0],u=t.length-1;function a(p,y){return y?a(p[t[y]],y-1):p[r]}var l=this._ctx.dir==="next"?1:-1;function f(p,y){return Q(a(p,u),a(y,u))*l}return this.toArray(function(p){return p.sort(f)}).then(n)},Z.prototype.toArray=function(e){var n=this;return this._read(function(t){var r=n._ctx;if(r.dir==="next"&&gn(r,!0)&&0<r.limit){var u=r.valueMapper,a=st(r,r.table.core.schema);return r.table.core.query({trans:t,limit:r.limit,values:!0,query:{index:a,range:r.range}}).then(function(f){return f=f.result,u?f.map(u):f})}var l=[];return ct(r,function(f){return l.push(f)},t,r.table.core).then(function(){return l})},e)},Z.prototype.offset=function(e){var n=this._ctx;return e<=0||(n.offset+=e,gn(n)?Yt(n,function(){var t=e;return function(r,u){return t===0||(t===1?--t:u(function(){r.advance(t),t=0}),!1)}}):Yt(n,function(){var t=e;return function(){return--t<0}})),this},Z.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Yt(this._ctx,function(){var n=e;return function(t,r,u){return--n<=0&&r(u),0<=n}},!0),this},Z.prototype.until=function(e,n){return zt(this._ctx,function(t,r,u){return!e(t.value)||(r(u),n)}),this},Z.prototype.first=function(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)},Z.prototype.last=function(e){return this.reverse().first(e)},Z.prototype.filter=function(e){var n;return zt(this._ctx,function(t){return e(t.value)}),(n=this._ctx).isMatch=un(n.isMatch,e),this},Z.prototype.and=function(e){return this.filter(e)},Z.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},Z.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Z.prototype.desc=function(){return this.reverse()},Z.prototype.eachKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(t,r){e(r.key,r)})},Z.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},Z.prototype.eachPrimaryKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(t,r){e(r.primaryKey,r)})},Z.prototype.keys=function(e){var n=this._ctx;n.keysOnly=!n.isMatch;var t=[];return this.each(function(r,u){t.push(u.key)}).then(function(){return t}).then(e)},Z.prototype.primaryKeys=function(e){var n=this._ctx;if(n.dir==="next"&&gn(n,!0)&&0<n.limit)return this._read(function(r){var u=st(n,n.table.core.schema);return n.table.core.query({trans:r,values:!1,limit:n.limit,query:{index:u,range:n.range}})}).then(function(r){return r.result}).then(e);n.keysOnly=!n.isMatch;var t=[];return this.each(function(r,u){t.push(u.primaryKey)}).then(function(){return t}).then(e)},Z.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},Z.prototype.firstKey=function(e){return this.limit(1).keys(function(n){return n[0]}).then(e)},Z.prototype.lastKey=function(e){return this.reverse().firstKey(e)},Z.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var n={};return zt(this._ctx,function(u){var r=u.primaryKey.toString(),u=C(n,r);return n[r]=!0,!u}),this},Z.prototype.modify=function(e){var n=this,t=this._ctx;return this._write(function(r){var u,a,l;l=typeof e=="function"?e:(u=O(e),a=u.length,function(m){for(var x=!1,E=0;E<a;++E){var P=u[E],S=e[P],N=ve(m,P);S instanceof Rn?(de(m,P,S.execute(N)),x=!0):N!==S&&(de(m,P,S),x=!0)}return x});function f(m,P){var E=P.failures,P=P.numFailures;g+=m-P;for(var S=0,N=O(E);S<N.length;S++){var j=N[S];_.push(E[j])}}var p=t.table.core,y=p.schema.primaryKey,b=y.outbound,d=y.extractKey,k=n.db._options.modifyChunkSize||200,_=[],g=0,w=[];return n.clone().primaryKeys().then(function(m){function x(P){var S=Math.min(k,m.length-P);return p.getMany({trans:r,keys:m.slice(P,P+S),cache:"immutable"}).then(function(N){for(var j=[],T=[],I=b?[]:null,B=[],R=0;R<S;++R){var M=N[R],V={value:Xe(M),primKey:m[P+R]};l.call(V,V.value,V)!==!1&&(V.value==null?B.push(m[P+R]):b||Q(d(M),d(V.value))===0?(T.push(V.value),b&&I.push(m[P+R])):(B.push(m[P+R]),j.push(V.value)))}return Promise.resolve(0<j.length&&p.mutate({trans:r,type:"add",values:j}).then(function(G){for(var z in G.failures)B.splice(parseInt(z),1);f(j.length,G)})).then(function(){return(0<T.length||E&&typeof e=="object")&&p.mutate({trans:r,type:"put",keys:I,values:T,criteria:E,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<P}).then(function(G){return f(T.length,G)})}).then(function(){return(0<B.length||E&&e===Gt)&&p.mutate({trans:r,type:"delete",keys:B,criteria:E,isAdditionalChunk:0<P}).then(function(G){return f(B.length,G)})}).then(function(){return m.length>P+S&&x(P+k)})})}var E=gn(t)&&t.limit===1/0&&(typeof e!="function"||e===Gt)&&{index:t.index,range:t.range};return x(0).then(function(){if(0<_.length)throw new Qn("Error modifying one or more objects",_,g,w);return m.length})})})},Z.prototype.delete=function(){var e=this._ctx,n=e.range;return gn(e)&&(e.isPrimKey||n.type===3)?this._write(function(t){var r=e.table.core.schema.primaryKey,u=n;return e.table.core.count({trans:t,query:{index:r,range:u}}).then(function(a){return e.table.core.mutate({trans:t,type:"deleteRange",range:u}).then(function(l){var f=l.failures;if(l.lastResult,l.results,l=l.numFailures,l)throw new Qn("Could not delete some values",Object.keys(f).map(function(p){return f[p]}),a-l);return a-l})})}):this.modify(Gt)},Z);function Z(){}var Gt=function(e,n){return n.value=null};function ji(e,n){return e<n?-1:e===n?0:1}function Ri(e,n){return n<e?-1:e===n?0:1}function we(e,n,t){return e=e instanceof Jr?new e.Collection(e):e,e._ctx.error=new(t||TypeError)(n),e}function bn(e){return new e.Collection(e,function(){return Zr("")}).limit(0)}function lt(e,n,t,r){var u,a,l,f,p,y,b,d=t.length;if(!t.every(function(g){return typeof g=="string"}))return we(e,Ur);function k(g){u=g==="next"?function(m){return m.toUpperCase()}:function(m){return m.toLowerCase()},a=g==="next"?function(m){return m.toLowerCase()}:function(m){return m.toUpperCase()},l=g==="next"?ji:Ri;var w=t.map(function(m){return{lower:a(m),upper:u(m)}}).sort(function(m,x){return l(m.lower,x.lower)});f=w.map(function(m){return m.upper}),p=w.map(function(m){return m.lower}),b=(y=g)==="next"?"":r}k("next"),e=new e.Collection(e,function(){return Ue(f[0],p[d-1]+r)}),e._ondirectionchange=function(g){k(g)};var _=0;return e._addAlgorithm(function(g,w,m){var x=g.key;if(typeof x!="string")return!1;var E=a(x);if(n(E,p,_))return!0;for(var P=null,S=_;S<d;++S){var N=function(j,T,I,B,R,M){for(var V=Math.min(j.length,B.length),G=-1,z=0;z<V;++z){var xe=T[z];if(xe!==B[z])return R(j[z],I[z])<0?j.substr(0,z)+I[z]+I.substr(z+1):R(j[z],B[z])<0?j.substr(0,z)+B[z]+I.substr(z+1):0<=G?j.substr(0,G)+T[G]+I.substr(G+1):null;R(j[z],xe)<0&&(G=z)}return V<B.length&&M==="next"?j+I.substr(j.length):V<j.length&&M==="prev"?j.substr(0,I.length):G<0?null:j.substr(0,G)+B[G]+I.substr(G+1)}(x,E,f[S],p[S],l,y);N===null&&P===null?_=S+1:(P===null||0<l(P,N))&&(P=N)}return w(P!==null?function(){g.continue(P+b)}:m),!1}),e}function Ue(e,n,t,r){return{type:2,lower:e,upper:n,lowerOpen:t,upperOpen:r}}function Zr(e){return{type:1,lower:e,upper:e}}var Jr=(Object.defineProperty(he.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),he.prototype.between=function(e,n,t,r){t=t!==!1,r=r===!0;try{return 0<this._cmp(e,n)||this._cmp(e,n)===0&&(t||r)&&(!t||!r)?bn(this):new this.Collection(this,function(){return Ue(e,n,!t,!r)})}catch{return we(this,Te)}},he.prototype.equals=function(e){return e==null?we(this,Te):new this.Collection(this,function(){return Zr(e)})},he.prototype.above=function(e){return e==null?we(this,Te):new this.Collection(this,function(){return Ue(e,void 0,!0)})},he.prototype.aboveOrEqual=function(e){return e==null?we(this,Te):new this.Collection(this,function(){return Ue(e,void 0,!1)})},he.prototype.below=function(e){return e==null?we(this,Te):new this.Collection(this,function(){return Ue(void 0,e,!1,!0)})},he.prototype.belowOrEqual=function(e){return e==null?we(this,Te):new this.Collection(this,function(){return Ue(void 0,e)})},he.prototype.startsWith=function(e){return typeof e!="string"?we(this,Ur):this.between(e,e+on,!0,!0)},he.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):lt(this,function(n,t){return n.indexOf(t[0])===0},[e],on)},he.prototype.equalsIgnoreCase=function(e){return lt(this,function(n,t){return n===t[0]},[e],"")},he.prototype.anyOfIgnoreCase=function(){var e=Ne.apply(hn,arguments);return e.length===0?bn(this):lt(this,function(n,t){return t.indexOf(n)!==-1},e,"")},he.prototype.startsWithAnyOfIgnoreCase=function(){var e=Ne.apply(hn,arguments);return e.length===0?bn(this):lt(this,function(n,t){return t.some(function(r){return n.indexOf(r)===0})},e,on)},he.prototype.anyOf=function(){var e=this,n=Ne.apply(hn,arguments),t=this._cmp;try{n.sort(t)}catch{return we(this,Te)}if(n.length===0)return bn(this);var r=new this.Collection(this,function(){return Ue(n[0],n[n.length-1])});r._ondirectionchange=function(a){t=a==="next"?e._ascending:e._descending,n.sort(t)};var u=0;return r._addAlgorithm(function(a,l,f){for(var p=a.key;0<t(p,n[u]);)if(++u===n.length)return l(f),!1;return t(p,n[u])===0||(l(function(){a.continue(n[u])}),!1)}),r},he.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},he.prototype.noneOf=function(){var e=Ne.apply(hn,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return we(this,Te)}var n=e.reduce(function(t,r){return t?t.concat([[t[t.length-1][1],r]]):[[-1/0,r]]},null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},he.prototype.inAnyRange=function(x,n){var t=this,r=this._cmp,u=this._ascending,a=this._descending,l=this._min,f=this._max;if(x.length===0)return bn(this);if(!x.every(function(E){return E[0]!==void 0&&E[1]!==void 0&&u(E[0],E[1])<=0}))return we(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",L.InvalidArgument);var p=!n||n.includeLowers!==!1,y=n&&n.includeUppers===!0,b,d=u;function k(E,P){return d(E[0],P[0])}try{(b=x.reduce(function(E,P){for(var S=0,N=E.length;S<N;++S){var j=E[S];if(r(P[0],j[1])<0&&0<r(P[1],j[0])){j[0]=l(j[0],P[0]),j[1]=f(j[1],P[1]);break}}return S===N&&E.push(P),E},[])).sort(k)}catch{return we(this,Te)}var _=0,g=y?function(E){return 0<u(E,b[_][1])}:function(E){return 0<=u(E,b[_][1])},w=p?function(E){return 0<a(E,b[_][0])}:function(E){return 0<=a(E,b[_][0])},m=g,x=new this.Collection(this,function(){return Ue(b[0][0],b[b.length-1][1],!p,!y)});return x._ondirectionchange=function(E){d=E==="next"?(m=g,u):(m=w,a),b.sort(k)},x._addAlgorithm(function(E,P,S){for(var N,j=E.key;m(j);)if(++_===b.length)return P(S),!1;return!g(N=j)&&!w(N)||(t._cmp(j,b[_][1])===0||t._cmp(j,b[_][0])===0||P(function(){d===u?E.continue(b[_][0]):E.continue(b[_][1])}),!1)}),x},he.prototype.startsWithAnyOf=function(){var e=Ne.apply(hn,arguments);return e.every(function(n){return typeof n=="string"})?e.length===0?bn(this):this.inAnyRange(e.map(function(n){return[n,n+on]})):we(this,"startsWithAnyOf() only works with strings")},he);function he(){}function Ce(e){return ie(function(n){return Bn(n),e(n.target.error),!1})}function Bn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var qn="storagemutated",Qt="x-storagemutated-1",He=Dn(null,qn),Bi=(Oe.prototype._lock=function(){return ge(!F.global),++this._reculock,this._reculock!==1||F.global||(F.lockOwnerFor=this),this},Oe.prototype._unlock=function(){if(ge(!F.global),--this._reculock==0)for(F.global||(F.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{rn(e[1],e[0])}catch{}}return this},Oe.prototype._locked=function(){return this._reculock&&F.lockOwnerFor!==this},Oe.prototype.create=function(e){var n=this;if(!this.mode)return this;var t=this.db.idbdb,r=this.db._state.dbOpenError;if(ge(!this.idbtrans),!e&&!t)switch(r&&r.name){case"DatabaseClosedError":throw new L.DatabaseClosed(r);case"MissingAPIError":throw new L.MissingAPI(r.message,r);default:throw new L.OpenFailed(r)}if(!this.active)throw new L.TransactionInactive;return ge(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||t).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ie(function(u){Bn(u),n._reject(e.error)}),e.onabort=ie(function(u){Bn(u),n.active&&n._reject(new L.Abort(e.error)),n.active=!1,n.on("abort").fire(u)}),e.oncomplete=ie(function(){n.active=!1,n._resolve(),"mutatedParts"in e&&He.storagemutated.fire(e.mutatedParts)}),this},Oe.prototype._promise=function(e,n,t){var r=this;if(e==="readwrite"&&this.mode!=="readwrite")return ae(new L.ReadOnly("Transaction is readonly"));if(!this.active)return ae(new L.TransactionInactive);if(this._locked())return new q(function(a,l){r._blockedFuncs.push([function(){r._promise(e,n,t).then(a,l)},F])});if(t)return Fe(function(){var a=new q(function(l,f){r._lock();var p=n(l,f,r);p&&p.then&&p.then(l,f)});return a.finally(function(){return r._unlock()}),a._lib=!0,a});var u=new q(function(a,l){var f=n(a,l,r);f&&f.then&&f.then(a,l)});return u._lib=!0,u},Oe.prototype._root=function(){return this.parent?this.parent._root():this},Oe.prototype.waitFor=function(e){var n,t=this._root(),r=q.resolve(e);t._waitingFor?t._waitingFor=t._waitingFor.then(function(){return r}):(t._waitingFor=r,t._waitingQueue=[],n=t.idbtrans.objectStore(t.storeNames[0]),function a(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(n.get(-1/0).onsuccess=a)}());var u=t._waitingFor;return new q(function(a,l){r.then(function(f){return t._waitingQueue.push(ie(a.bind(null,f)))},function(f){return t._waitingQueue.push(ie(l.bind(null,f)))}).finally(function(){t._waitingFor===u&&(t._waitingFor=null)})})},Oe.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new L.Abort))},Oe.prototype.table=function(e){var n=this._memoizedTables||(this._memoizedTables={});if(C(n,e))return n[e];var t=this.schema[e];if(!t)throw new L.NotFound("Table "+e+" not part of transaction");return t=new this.db.Table(e,t,this),t.core=this.db.core.table(e),n[e]=t},Oe);function Oe(){}function Xt(e,n,t,r,u,a,l){return{name:e,keyPath:n,unique:t,multi:r,auto:u,compound:a,src:(t&&!l?"&":"")+(r?"*":"")+(u?"++":"")+eo(n)}}function eo(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Zt(e,n,t){return{name:e,primKey:n,indexes:t,mappedClass:null,idxByName:(r=function(u){return[u.name,u]},t.reduce(function(u,a,l){return l=r(a,l),l&&(u[l[0]]=l[1]),u},{}))};var r}var Mn=function(e){try{return e.only([[]]),Mn=function(){return[[]]},[[]]}catch{return Mn=function(){return on},on}};function Jt(e){return e==null?function(){}:typeof e=="string"?(n=e).split(".").length===1?function(t){return t[n]}:function(t){return ve(t,n)}:function(t){return ve(t,e)};var n}function no(e){return[].slice.call(e)}var qi=0;function Fn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function Mi(e,n,p){function r(m){if(m.type===3)return null;if(m.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var _=m.lower,g=m.upper,w=m.lowerOpen,m=m.upperOpen;return _===void 0?g===void 0?null:n.upperBound(g,!!m):g===void 0?n.lowerBound(_,!!w):n.bound(_,g,!!w,!!m)}function u(k){var _,g=k.name;return{name:g,schema:k,mutate:function(w){var m=w.trans,x=w.type,E=w.keys,P=w.values,S=w.range;return new Promise(function(N,j){N=ie(N);var T=m.objectStore(g),I=T.keyPath==null,B=x==="put"||x==="add";if(!B&&x!=="delete"&&x!=="deleteRange")throw new Error("Invalid operation type: "+x);var R,M=(E||P||{length:1}).length;if(E&&P&&E.length!==P.length)throw new Error("Given keys array must have same length as given values array.");if(M===0)return N({numFailures:0,failures:{},results:[],lastResult:void 0});function V(me){++xe,Bn(me)}var G=[],z=[],xe=0;if(x==="deleteRange"){if(S.type===4)return N({numFailures:xe,failures:z,results:[],lastResult:void 0});S.type===3?G.push(R=T.clear()):G.push(R=T.delete(r(S)))}else{var I=B?I?[P,E]:[P,null]:[E,null],Y=I[0],_e=I[1];if(B)for(var ye=0;ye<M;++ye)G.push(R=_e&&_e[ye]!==void 0?T[x](Y[ye],_e[ye]):T[x](Y[ye])),R.onerror=V;else for(ye=0;ye<M;++ye)G.push(R=T[x](Y[ye])),R.onerror=V}function xt(me){me=me.target.result,G.forEach(function(cn,vr){return cn.error!=null&&(z[vr]=cn.error)}),N({numFailures:xe,failures:z,results:x==="delete"?E:G.map(function(cn){return cn.result}),lastResult:me})}R.onerror=function(me){V(me),xt(me)},R.onsuccess=xt})},getMany:function(w){var m=w.trans,x=w.keys;return new Promise(function(E,P){E=ie(E);for(var S,N=m.objectStore(g),j=x.length,T=new Array(j),I=0,B=0,R=function(G){G=G.target,T[G._pos]=G.result,++B===I&&E(T)},M=Ce(P),V=0;V<j;++V)x[V]!=null&&((S=N.get(x[V]))._pos=V,S.onsuccess=R,S.onerror=M,++I);I===0&&E(T)})},get:function(w){var m=w.trans,x=w.key;return new Promise(function(E,P){E=ie(E);var S=m.objectStore(g).get(x);S.onsuccess=function(N){return E(N.target.result)},S.onerror=Ce(P)})},query:(_=y,function(w){return new Promise(function(m,x){m=ie(m);var E,P,S,I=w.trans,N=w.values,j=w.limit,R=w.query,T=j===1/0?void 0:j,B=R.index,R=R.range,I=I.objectStore(g),B=B.isPrimaryKey?I:I.index(B.name),R=r(R);if(j===0)return m({result:[]});_?((T=N?B.getAll(R,T):B.getAllKeys(R,T)).onsuccess=function(M){return m({result:M.target.result})},T.onerror=Ce(x)):(E=0,P=!N&&"openKeyCursor"in B?B.openKeyCursor(R):B.openCursor(R),S=[],P.onsuccess=function(M){var V=P.result;return V?(S.push(N?V.value:V.primaryKey),++E===j?m({result:S}):void V.continue()):m({result:S})},P.onerror=Ce(x))})}),openCursor:function(w){var m=w.trans,x=w.values,E=w.query,P=w.reverse,S=w.unique;return new Promise(function(N,j){N=ie(N);var B=E.index,T=E.range,I=m.objectStore(g),I=B.isPrimaryKey?I:I.index(B.name),B=P?S?"prevunique":"prev":S?"nextunique":"next",R=!x&&"openKeyCursor"in I?I.openKeyCursor(r(T),B):I.openCursor(r(T),B);R.onerror=Ce(j),R.onsuccess=ie(function(M){var V,G,z,xe,Y=R.result;Y?(Y.___id=++qi,Y.done=!1,V=Y.continue.bind(Y),G=(G=Y.continuePrimaryKey)&&G.bind(Y),z=Y.advance.bind(Y),xe=function(){throw new Error("Cursor not stopped")},Y.trans=m,Y.stop=Y.continue=Y.continuePrimaryKey=Y.advance=function(){throw new Error("Cursor not started")},Y.fail=ie(j),Y.next=function(){var _e=this,ye=1;return this.start(function(){return ye--?_e.continue():_e.stop()}).then(function(){return _e})},Y.start=function(_e){function ye(){if(R.result)try{_e()}catch(me){Y.fail(me)}else Y.done=!0,Y.start=function(){throw new Error("Cursor behind last entry")},Y.stop()}var xt=new Promise(function(me,cn){me=ie(me),R.onerror=Ce(cn),Y.fail=cn,Y.stop=function(vr){Y.stop=Y.continue=Y.continuePrimaryKey=Y.advance=xe,me(vr)}});return R.onsuccess=ie(function(me){R.onsuccess=ye,ye()}),Y.continue=V,Y.continuePrimaryKey=G,Y.advance=z,ye(),xt},N(Y)):N(null)},j)})},count:function(w){var m=w.query,x=w.trans,E=m.index,P=m.range;return new Promise(function(S,N){var j=x.objectStore(g),T=E.isPrimaryKey?j:j.index(E.name),j=r(P),T=j?T.count(j):T.count();T.onsuccess=ie(function(I){return S(I.target.result)}),T.onerror=Ce(N)})}}}var a,l,f,b=(l=p,f=no((a=e).objectStoreNames),{schema:{name:a.name,tables:f.map(function(k){return l.objectStore(k)}).map(function(k){var _=k.keyPath,m=k.autoIncrement,g=K(_),w={},m={name:k.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:_==null,compound:g,keyPath:_,autoIncrement:m,unique:!0,extractKey:Jt(_)},indexes:no(k.indexNames).map(function(x){return k.index(x)}).map(function(S){var E=S.name,P=S.unique,N=S.multiEntry,S=S.keyPath,N={name:E,compound:K(S),keyPath:S,unique:P,multiEntry:N,extractKey:Jt(S)};return w[Fn(S)]=N}),getIndexByKeyPath:function(x){return w[Fn(x)]}};return w[":id"]=m.primaryKey,_!=null&&(w[Fn(_)]=m.primaryKey),m})},hasGetAll:0<f.length&&"getAll"in l.objectStore(f[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),p=b.schema,y=b.hasGetAll,b=p.tables.map(u),d={};return b.forEach(function(k){return d[k.name]=k}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(k){if(!d[k])throw new Error("Table '".concat(k,"' not found"));return d[k]},MIN_KEY:-1/0,MAX_KEY:Mn(n),schema:p}}function Fi(e,n,t,r){var u=t.IDBKeyRange;return t.indexedDB,{dbcore:(r=Mi(n,u,r),e.dbcore.reduce(function(a,l){return l=l.create,c(c({},a),l(a))},r))}}function ft(e,r){var t=r.db,r=Fi(e._middlewares,t,e._deps,r);e.core=r.dbcore,e.tables.forEach(function(u){var a=u.name;e.core.schema.tables.some(function(l){return l.name===a})&&(u.core=e.core.table(a),e[a]instanceof e.Table&&(e[a].core=u.core))})}function ht(e,n,t,r){t.forEach(function(u){var a=r[u];n.forEach(function(l){var f=function p(y,b){return ce(y,b)||(y=A(y))&&p(y,b)}(l,u);(!f||"value"in f&&f.value===void 0)&&(l===e.Transaction.prototype||l instanceof e.Transaction?ne(l,u,{get:function(){return this.table(u)},set:function(p){U(this,u,{value:p,writable:!0,configurable:!0,enumerable:!0})}}):l[u]=new e.Table(u,a))})})}function er(e,n){n.forEach(function(t){for(var r in t)t[r]instanceof e.Table&&delete t[r]})}function $i(e,n){return e._cfg.version-n._cfg.version}function Li(e,n,t,r){var u=e._dbSchema;t.objectStoreNames.contains("$meta")&&!u.$meta&&(u.$meta=Zt("$meta",ro("")[0],[]),e._storeNames.push("$meta"));var a=e._createTransaction("readwrite",e._storeNames,u);a.create(t),a._completion.catch(r);var l=a._reject.bind(a),f=F.transless||F;Fe(function(){return F.trans=a,F.transless=f,n!==0?(ft(e,t),y=n,((p=a).storeNames.includes("$meta")?p.table("$meta").get("version").then(function(b){return b??y}):q.resolve(y)).then(function(b){return k=b,_=a,g=t,w=[],b=(d=e)._versions,m=d._dbSchema=pt(0,d.idbdb,g),(b=b.filter(function(x){return x._cfg.version>=k})).length!==0?(b.forEach(function(x){w.push(function(){var E=m,P=x._cfg.dbschema;_t(d,E,g),_t(d,P,g),m=d._dbSchema=P;var S=nr(E,P);S.add.forEach(function(B){tr(g,B[0],B[1].primKey,B[1].indexes)}),S.change.forEach(function(B){if(B.recreate)throw new L.Upgrade("Not yet support for changing primary key");var R=g.objectStore(B.name);B.add.forEach(function(M){return dt(R,M)}),B.change.forEach(function(M){R.deleteIndex(M.name),dt(R,M)}),B.del.forEach(function(M){return R.deleteIndex(M)})});var N=x._cfg.contentUpgrade;if(N&&x._cfg.version>k){ft(d,g),_._memoizedTables={};var j=Ge(P);S.del.forEach(function(B){j[B]=E[B]}),er(d,[d.Transaction.prototype]),ht(d,[d.Transaction.prototype],O(j),j),_.schema=j;var T,I=Dt(N);return I&&vn(),S=q.follow(function(){var B;(T=N(_))&&I&&(B=$e.bind(null,null),T.then(B,B))}),T&&typeof T.then=="function"?q.resolve(T):S.then(function(){return T})}}),w.push(function(E){var P,S,N=x._cfg.dbschema;P=N,S=E,[].slice.call(S.db.objectStoreNames).forEach(function(j){return P[j]==null&&S.db.deleteObjectStore(j)}),er(d,[d.Transaction.prototype]),ht(d,[d.Transaction.prototype],d._storeNames,d._dbSchema),_.schema=d._dbSchema}),w.push(function(E){d.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(d.idbdb.version/10)===x._cfg.version?(d.idbdb.deleteObjectStore("$meta"),delete d._dbSchema.$meta,d._storeNames=d._storeNames.filter(function(P){return P!=="$meta"})):E.objectStore("$meta").put(x._cfg.version,"version"))})}),function x(){return w.length?q.resolve(w.shift()(_.idbtrans)).then(x):q.resolve()}().then(function(){to(m,g)})):q.resolve();var d,k,_,g,w,m}).catch(l)):(O(u).forEach(function(b){tr(t,b,u[b].primKey,u[b].indexes)}),ft(e,t),void q.follow(function(){return e.on.populate.fire(a)}).catch(l));var p,y})}function Ui(e,n){to(e._dbSchema,n),n.db.version%10!=0||n.objectStoreNames.contains("$meta")||n.db.createObjectStore("$meta").add(Math.ceil(n.db.version/10-1),"version");var t=pt(0,e.idbdb,n);_t(e,e._dbSchema,n);for(var r=0,u=nr(t,e._dbSchema).change;r<u.length;r++){var a=function(l){if(l.change.length||l.recreate)return console.warn("Unable to patch indexes of table ".concat(l.name," because it has changes on the type of index or primary key.")),{value:void 0};var f=n.objectStore(l.name);l.add.forEach(function(p){Pe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(l.name,".").concat(p.src)),dt(f,p)})}(u[r]);if(typeof a=="object")return a.value}}function nr(e,n){var t,r={del:[],add:[],change:[]};for(t in e)n[t]||r.del.push(t);for(t in n){var u=e[t],a=n[t];if(u){var l={name:t,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(u.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||u.primKey.auto!==a.primKey.auto)l.recreate=!0,r.change.push(l);else{var f=u.idxByName,p=a.idxByName,y=void 0;for(y in f)p[y]||l.del.push(y);for(y in p){var b=f[y],d=p[y];b?b.src!==d.src&&l.change.push(d):l.add.push(d)}(0<l.del.length||0<l.add.length||0<l.change.length)&&r.change.push(l)}}else r.add.push([t,a])}return r}function tr(e,n,t,r){var u=e.db.createObjectStore(n,t.keyPath?{keyPath:t.keyPath,autoIncrement:t.auto}:{autoIncrement:t.auto});return r.forEach(function(a){return dt(u,a)}),u}function to(e,n){O(e).forEach(function(t){n.db.objectStoreNames.contains(t)||(Pe&&console.debug("Dexie: Creating missing table",t),tr(n,t,e[t].primKey,e[t].indexes))})}function dt(e,n){e.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function pt(e,n,t){var r={};return J(n.objectStoreNames,0).forEach(function(u){for(var a=t.objectStore(u),l=Xt(eo(y=a.keyPath),y||"",!0,!1,!!a.autoIncrement,y&&typeof y!="string",!0),f=[],p=0;p<a.indexNames.length;++p){var b=a.index(a.indexNames[p]),y=b.keyPath,b=Xt(b.name,y,!!b.unique,!!b.multiEntry,!1,y&&typeof y!="string",!1);f.push(b)}r[u]=Zt(u,l,f)}),r}function _t(e,n,t){for(var r=t.db.objectStoreNames,u=0;u<r.length;++u){var a=r[u],l=t.objectStore(a);e._hasGetAll="getAll"in l;for(var f=0;f<l.indexNames.length;++f){var p=l.indexNames[f],y=l.index(p).keyPath,b=typeof y=="string"?y:"["+J(y).join("+")+"]";!n[a]||(y=n[a].idxByName[b])&&(y.name=p,delete n[a].idxByName[b],n[a].idxByName[p]=y)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&v.WorkerGlobalScope&&v instanceof v.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function ro(e){return e.split(",").map(function(n,t){var r=(n=n.trim()).replace(/([&*]|\+\+)/g,""),u=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Xt(r,u||null,/\&/.test(n),/\*/.test(n),/\+\+/.test(n),K(u),t===0)})}var Hi=(yt.prototype._parseStoresSpec=function(e,n){O(e).forEach(function(t){if(e[t]!==null){var r=ro(e[t]),u=r.shift();if(u.unique=!0,u.multi)throw new L.Schema("Primary key cannot be multi-valued");r.forEach(function(a){if(a.auto)throw new L.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new L.Schema("Index must have a name and cannot be an empty string")}),n[t]=Zt(t,u,r)}})},yt.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?D(this._cfg.storesSource,t):t;var t=n._versions,r={},u={};return t.forEach(function(a){D(r,a._cfg.storesSource),u=a._cfg.dbschema={},a._parseStoresSpec(r,u)}),n._dbSchema=u,er(n,[n._allTables,n,n.Transaction.prototype]),ht(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],O(u),u),n._storeNames=O(u),this},yt.prototype.upgrade=function(e){return this._cfg.contentUpgrade=Rt(this._cfg.contentUpgrade||ee,e),this},yt);function yt(){}function rr(e,n){var t=e._dbNamesDB;return t||(t=e._dbNamesDB=new De(ut,{addons:[],indexedDB:e,IDBKeyRange:n})).version(1).stores({dbnames:"name"}),t.table("dbnames")}function or(e){return e&&typeof e.databases=="function"}function ir(e){return Fe(function(){return F.letThrough=!0,e()})}function ur(e){return!("from"in e)}var pe=function(e,n){if(!this){var t=new pe;return e&&"d"in e&&D(t,e),t}D(this,arguments.length?{d:1,from:e,to:1<arguments.length?n:e}:{d:0})};function $n(e,n,t){var r=Q(n,t);if(!isNaN(r)){if(0<r)throw RangeError();if(ur(e))return D(e,{from:n,to:t,d:1});var u=e.l,r=e.r;if(Q(t,e.from)<0)return u?$n(u,n,t):e.l={from:n,to:t,d:1,l:null,r:null},io(e);if(0<Q(n,e.to))return r?$n(r,n,t):e.r={from:n,to:t,d:1,l:null,r:null},io(e);Q(n,e.from)<0&&(e.from=n,e.l=null,e.d=r?r.d+1:1),0<Q(t,e.to)&&(e.to=t,e.r=null,e.d=e.l?e.l.d+1:1),t=!e.r,u&&!e.l&&Ln(e,u),r&&t&&Ln(e,r)}}function Ln(e,n){ur(n)||function t(r,p){var a=p.from,l=p.to,f=p.l,p=p.r;$n(r,a,l),f&&t(r,f),p&&t(r,p)}(e,n)}function oo(e,n){var t=vt(n),r=t.next();if(r.done)return!1;for(var u=r.value,a=vt(e),l=a.next(u.from),f=l.value;!r.done&&!l.done;){if(Q(f.from,u.to)<=0&&0<=Q(f.to,u.from))return!0;Q(u.from,f.from)<0?u=(r=t.next(f.from)).value:f=(l=a.next(u.from)).value}return!1}function vt(e){var n=ur(e)?null:{s:0,n:e};return{next:function(t){for(var r=0<arguments.length;n;)switch(n.s){case 0:if(n.s=1,r)for(;n.n.l&&Q(t,n.n.from)<0;)n={up:n,n:n.n.l,s:1};else for(;n.n.l;)n={up:n,n:n.n.l,s:1};case 1:if(n.s=2,!r||Q(t,n.n.to)<=0)return{value:n.n,done:!1};case 2:if(n.n.r){n.s=3,n={up:n,n:n.n.r,s:0};continue}case 3:n=n.up}return{done:!0}}}}function io(e){var n,t,r=(((n=e.r)===null||n===void 0?void 0:n.d)||0)-(((t=e.l)===null||t===void 0?void 0:t.d)||0),u=1<r?"r":r<-1?"l":"";u&&(n=u=="r"?"l":"r",t=c({},e),r=e[u],e.from=r.from,e.to=r.to,e[u]=r[u],t[u]=r[n],(e[n]=t).d=uo(t)),e.d=uo(e)}function uo(t){var n=t.r,t=t.l;return(n?t?Math.max(n.d,t.d):n.d:t?t.d:0)+1}function mt(e,n){return O(n).forEach(function(t){e[t]?Ln(e[t],n[t]):e[t]=function r(u){var a,l,f={};for(a in u)C(u,a)&&(l=u[a],f[a]=!l||typeof l!="object"||Qe.has(l.constructor)?l:r(l));return f}(n[t])}),e}function ar(e,n){return e.all||n.all||Object.keys(e).some(function(t){return n[t]&&oo(n[t],e[t])})}X(pe.prototype,((ke={add:function(e){return Ln(this,e),this},addKey:function(e){return $n(this,e,e),this},addKeys:function(e){var n=this;return e.forEach(function(t){return $n(n,t,t)}),this},hasKey:function(e){var n=vt(this).next(e).value;return n&&Q(n.from,e)<=0&&0<=Q(n.to,e)}})[It]=function(){return vt(this)},ke));var an={},sr={},cr=!1;function gt(e){mt(sr,e),cr||(cr=!0,setTimeout(function(){cr=!1,lr(sr,!(sr={}))},0))}function lr(e,n){n===void 0&&(n=!1);var t=new Set;if(e.all)for(var r=0,u=Object.values(an);r<u.length;r++)ao(l=u[r],e,t,n);else for(var a in e){var l,f=/^idb\:\/\/(.*)\/(.*)\//.exec(a);f&&(a=f[1],f=f[2],(l=an["idb://".concat(a,"/").concat(f)])&&ao(l,e,t,n))}t.forEach(function(p){return p()})}function ao(e,n,t,r){for(var u=[],a=0,l=Object.entries(e.queries.query);a<l.length;a++){for(var f=l[a],p=f[0],y=[],b=0,d=f[1];b<d.length;b++){var k=d[b];ar(n,k.obsSet)?k.subscribers.forEach(function(m){return t.add(m)}):r&&y.push(k)}r&&u.push([p,y])}if(r)for(var _=0,g=u;_<g.length;_++){var w=g[_],p=w[0],y=w[1];e.queries.query[p]=y}}function Vi(e){var n=e._state,t=e._deps.indexedDB;if(n.isBeingOpened||e.idbdb)return n.dbReadyPromise.then(function(){return n.dbOpenError?ae(n.dbOpenError):e});n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var r=n.openCanceller,u=Math.round(10*e.verno),a=!1;function l(){if(n.openCanceller!==r)throw new L.DatabaseClosed("db.open() was cancelled")}function f(){return new q(function(k,_){if(l(),!t)throw new L.MissingAPI;var g=e.name,w=n.autoSchema||!u?t.open(g):t.open(g,u);if(!w)throw new L.MissingAPI;w.onerror=Ce(_),w.onblocked=ie(e._fireOnBlocked),w.onupgradeneeded=ie(function(m){var x;b=w.transaction,n.autoSchema&&!e._options.allowEmptyDB?(w.onerror=Bn,b.abort(),w.result.close(),(x=t.deleteDatabase(g)).onsuccess=x.onerror=ie(function(){_(new L.NoSuchDatabase("Database ".concat(g," doesnt exist")))})):(b.onerror=Ce(_),m=m.oldVersion>Math.pow(2,62)?0:m.oldVersion,d=m<1,e.idbdb=w.result,a&&Ui(e,b),Li(e,m/10,b,_))},_),w.onsuccess=ie(function(){b=null;var m,x,E,P,S,N=e.idbdb=w.result,j=J(N.objectStoreNames);if(0<j.length)try{var T=N.transaction((P=j).length===1?P[0]:P,"readonly");if(n.autoSchema)x=N,E=T,(m=e).verno=x.version/10,E=m._dbSchema=pt(0,x,E),m._storeNames=J(x.objectStoreNames,0),ht(m,[m._allTables],O(E),E);else if(_t(e,e._dbSchema,T),((S=nr(pt(0,(S=e).idbdb,T),S._dbSchema)).add.length||S.change.some(function(I){return I.add.length||I.change.length}))&&!a)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),N.close(),u=N.version+1,a=!0,k(f());ft(e,T)}catch{}mn.push(e),N.onversionchange=ie(function(I){n.vcFired=!0,e.on("versionchange").fire(I)}),N.onclose=ie(function(I){e.on("close").fire(I)}),d&&(S=e._deps,T=g,N=S.indexedDB,S=S.IDBKeyRange,or(N)||T===ut||rr(N,S).put({name:T}).catch(ee)),k()},_)}).catch(function(k){switch(k==null?void 0:k.name){case"UnknownError":if(0<n.PR1398_maxLoop)return n.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),f();break;case"VersionError":if(0<u)return u=0,f()}return q.reject(k)})}var p,y=n.dbReadyResolve,b=null,d=!1;return q.race([r,(typeof navigator>"u"?q.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(k){function _(){return indexedDB.databases().finally(k)}p=setInterval(_,100),_()}).finally(function(){return clearInterval(p)}):Promise.resolve()).then(f)]).then(function(){return l(),n.onReadyBeingFired=[],q.resolve(ir(function(){return e.on.ready.fire(e.vip)})).then(function k(){if(0<n.onReadyBeingFired.length){var _=n.onReadyBeingFired.reduce(Rt,ee);return n.onReadyBeingFired=[],q.resolve(ir(function(){return _(e.vip)})).then(k)}})}).finally(function(){n.openCanceller===r&&(n.onReadyBeingFired=null,n.isBeingOpened=!1)}).catch(function(k){n.dbOpenError=k;try{b&&b.abort()}catch{}return r===n.openCanceller&&e._close(),ae(k)}).finally(function(){n.openComplete=!0,y()}).then(function(){var k;return d&&(k={},e.tables.forEach(function(_){_.schema.indexes.forEach(function(g){g.name&&(k["idb://".concat(e.name,"/").concat(_.name,"/").concat(g.name)]=new pe(-1/0,[[[]]]))}),k["idb://".concat(e.name,"/").concat(_.name,"/")]=k["idb://".concat(e.name,"/").concat(_.name,"/:dels")]=new pe(-1/0,[[[]]])}),He(qn).fire(k),lr(k,!0)),e})}function fr(e){function n(a){return e.next(a)}var t=u(n),r=u(function(a){return e.throw(a)});function u(a){return function(p){var f=a(p),p=f.value;return f.done?p:p&&typeof p.then=="function"?p.then(t,r):K(p)?Promise.all(p).then(t,r):t(p)}}return u(n)()}function bt(e,n,t){for(var r=K(e)?e.slice():[e],u=0;u<t;++u)r.push(n);return r}var Wi={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return c(c({},e),{table:function(n){var t=e.table(n),r=t.schema,u={},a=[];function l(d,k,_){var g=Fn(d),w=u[g]=u[g]||[],m=d==null?0:typeof d=="string"?1:d.length,x=0<k,x=c(c({},_),{name:x?"".concat(g,"(virtual-from:").concat(_.name,")"):_.name,lowLevelIndex:_,isVirtual:x,keyTail:k,keyLength:m,extractKey:Jt(d),unique:!x&&_.unique});return w.push(x),x.isPrimaryKey||a.push(x),1<m&&l(m===2?d[0]:d.slice(0,m-1),k+1,_),w.sort(function(E,P){return E.keyTail-P.keyTail}),x}n=l(r.primaryKey.keyPath,0,r.primaryKey),u[":id"]=[n];for(var f=0,p=r.indexes;f<p.length;f++){var y=p[f];l(y.keyPath,0,y)}function b(d){var k,_=d.query.index;return _.isVirtual?c(c({},d),{query:{index:_.lowLevelIndex,range:(k=d.query.range,_=_.keyTail,{type:k.type===1?2:k.type,lower:bt(k.lower,k.lowerOpen?e.MAX_KEY:e.MIN_KEY,_),lowerOpen:!0,upper:bt(k.upper,k.upperOpen?e.MIN_KEY:e.MAX_KEY,_),upperOpen:!0})}}):d}return c(c({},t),{schema:c(c({},r),{primaryKey:n,indexes:a,getIndexByKeyPath:function(d){return(d=u[Fn(d)])&&d[0]}}),count:function(d){return t.count(b(d))},query:function(d){return t.query(b(d))},openCursor:function(d){var k=d.query.index,_=k.keyTail,g=k.isVirtual,w=k.keyLength;return g?t.openCursor(b(d)).then(function(x){return x&&m(x)}):t.openCursor(d);function m(x){return Object.create(x,{continue:{value:function(E){E!=null?x.continue(bt(E,d.reverse?e.MAX_KEY:e.MIN_KEY,_)):d.unique?x.continue(x.key.slice(0,w).concat(d.reverse?e.MIN_KEY:e.MAX_KEY,_)):x.continue()}},continuePrimaryKey:{value:function(E,P){x.continuePrimaryKey(bt(E,e.MAX_KEY,_),P)}},primaryKey:{get:function(){return x.primaryKey}},key:{get:function(){var E=x.key;return w===1?E[0]:E.slice(0,w)}},value:{get:function(){return x.value}}})}}})}})}};function hr(e,n,t,r){return t=t||{},r=r||"",O(e).forEach(function(u){var a,l,f;C(n,u)?(a=e[u],l=n[u],typeof a=="object"&&typeof l=="object"&&a&&l?(f=Tt(a))!==Tt(l)?t[r+u]=n[u]:f==="Object"?hr(a,l,t,r+u+"."):a!==l&&(t[r+u]=n[u]):a!==l&&(t[r+u]=n[u])):t[r+u]=void 0}),O(n).forEach(function(u){C(e,u)||(t[r+u]=n[u])}),t}function dr(e,n){return n.type==="delete"?n.keys:n.keys||n.values.map(e.extractKey)}var zi={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return c(c({},e),{table:function(n){var t=e.table(n),r=t.schema.primaryKey;return c(c({},t),{mutate:function(u){var a=F.trans,l=a.table(n).hook,f=l.deleting,p=l.creating,y=l.updating;switch(u.type){case"add":if(p.fire===ee)break;return a._promise("readwrite",function(){return b(u)},!0);case"put":if(p.fire===ee&&y.fire===ee)break;return a._promise("readwrite",function(){return b(u)},!0);case"delete":if(f.fire===ee)break;return a._promise("readwrite",function(){return b(u)},!0);case"deleteRange":if(f.fire===ee)break;return a._promise("readwrite",function(){return function d(k,_,g){return t.query({trans:k,values:!1,query:{index:r,range:_},limit:g}).then(function(w){var m=w.result;return b({type:"delete",keys:m,trans:k}).then(function(x){return 0<x.numFailures?Promise.reject(x.failures[0]):m.length<g?{failures:[],numFailures:0,lastResult:void 0}:d(k,c(c({},_),{lower:m[m.length-1],lowerOpen:!0}),g)})})}(u.trans,u.range,1e4)},!0)}return t.mutate(u);function b(d){var k,_,g,w=F.trans,m=d.keys||dr(r,d);if(!m)throw new Error("Keys missing");return(d=d.type==="add"||d.type==="put"?c(c({},d),{keys:m}):c({},d)).type!=="delete"&&(d.values=h([],d.values)),d.keys&&(d.keys=h([],d.keys)),k=t,g=m,((_=d).type==="add"?Promise.resolve([]):k.getMany({trans:_.trans,keys:g,cache:"immutable"})).then(function(x){var E=m.map(function(P,S){var N,j,T,I=x[S],B={onerror:null,onsuccess:null};return d.type==="delete"?f.fire.call(B,P,I,w):d.type==="add"||I===void 0?(N=p.fire.call(B,P,d.values[S],w),P==null&&N!=null&&(d.keys[S]=P=N,r.outbound||de(d.values[S],r.keyPath,P))):(N=hr(I,d.values[S]),(j=y.fire.call(B,N,P,I,w))&&(T=d.values[S],Object.keys(j).forEach(function(R){C(T,R)?T[R]=j[R]:de(T,R,j[R])}))),B});return t.mutate(d).then(function(P){for(var S=P.failures,N=P.results,j=P.numFailures,P=P.lastResult,T=0;T<m.length;++T){var I=(N||m)[T],B=E[T];I==null?B.onerror&&B.onerror(S[T]):B.onsuccess&&B.onsuccess(d.type==="put"&&x[T]?d.values[T]:I)}return{failures:S,results:N,numFailures:j,lastResult:P}}).catch(function(P){return E.forEach(function(S){return S.onerror&&S.onerror(P)}),Promise.reject(P)})})}}})}})}};function so(e,n,t){try{if(!n||n.keys.length<e.length)return null;for(var r=[],u=0,a=0;u<n.keys.length&&a<e.length;++u)Q(n.keys[u],e[a])===0&&(r.push(t?Xe(n.values[u]):n.values[u]),++a);return r.length===e.length?r:null}catch{return null}}var Yi={stack:"dbcore",level:-1,create:function(e){return{table:function(n){var t=e.table(n);return c(c({},t),{getMany:function(r){if(!r.cache)return t.getMany(r);var u=so(r.keys,r.trans._cache,r.cache==="clone");return u?q.resolve(u):t.getMany(r).then(function(a){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?Xe(a):a},a})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),t.mutate(r)}})}}}};function co(e,n){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!n.schema.primaryKey.outbound}function lo(e,n){switch(e){case"query":return n.values&&!n.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Gi={stack:"dbcore",level:0,name:"Observability",create:function(e){var n=e.schema.name,t=new pe(e.MIN_KEY,e.MAX_KEY);return c(c({},e),{transaction:function(r,u,a){if(F.subscr&&u!=="readonly")throw new L.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(F.querier));return e.transaction(r,u,a)},table:function(r){var u=e.table(r),a=u.schema,l=a.primaryKey,d=a.indexes,f=l.extractKey,p=l.outbound,y=l.autoIncrement&&d.filter(function(_){return _.compound&&_.keyPath.includes(l.keyPath)}),b=c(c({},u),{mutate:function(_){function g(R){return R="idb://".concat(n,"/").concat(r,"/").concat(R),P[R]||(P[R]=new pe)}var w,m,x,E=_.trans,P=_.mutatedParts||(_.mutatedParts={}),S=g(""),N=g(":dels"),j=_.type,B=_.type==="deleteRange"?[_.range]:_.type==="delete"?[_.keys]:_.values.length<50?[dr(l,_).filter(function(R){return R}),_.values]:[],T=B[0],I=B[1],B=_.trans._cache;return K(T)?(S.addKeys(T),(B=j==="delete"||T.length===I.length?so(T,B):null)||N.addKeys(T),(B||I)&&(w=g,m=B,x=I,a.indexes.forEach(function(R){var M=w(R.name||"");function V(z){return z!=null?R.extractKey(z):null}function G(z){return R.multiEntry&&K(z)?z.forEach(function(xe){return M.addKey(xe)}):M.addKey(z)}(m||x).forEach(function(z,_e){var Y=m&&V(m[_e]),_e=x&&V(x[_e]);Q(Y,_e)!==0&&(Y!=null&&G(Y),_e!=null&&G(_e))})}))):T?(I={from:(I=T.lower)!==null&&I!==void 0?I:e.MIN_KEY,to:(I=T.upper)!==null&&I!==void 0?I:e.MAX_KEY},N.add(I),S.add(I)):(S.add(t),N.add(t),a.indexes.forEach(function(R){return g(R.name).add(t)})),u.mutate(_).then(function(R){return!T||_.type!=="add"&&_.type!=="put"||(S.addKeys(R.results),y&&y.forEach(function(M){var V=_.values.map(function(z){return M.extractKey(z)}),G=M.keyPath.findIndex(function(z){return z===l.keyPath});R.results.forEach(function(z){return V[G]=z}),g(M.name).addKeys(V)})),E.mutatedParts=mt(E.mutatedParts||{},P),R})}}),d=function(g){var w=g.query,g=w.index,w=w.range;return[g,new pe((g=w.lower)!==null&&g!==void 0?g:e.MIN_KEY,(w=w.upper)!==null&&w!==void 0?w:e.MAX_KEY)]},k={get:function(_){return[l,new pe(_.key)]},getMany:function(_){return[l,new pe().addKeys(_.keys)]},count:d,query:d,openCursor:d};return O(k).forEach(function(_){b[_]=function(g){var w=F.subscr,m=!!w,x=co(F,u)&&lo(_,g)?g.obsSet={}:w;if(m){var E=function(I){return I="idb://".concat(n,"/").concat(r,"/").concat(I),x[I]||(x[I]=new pe)},P=E(""),S=E(":dels"),w=k[_](g),m=w[0],w=w[1];if((_==="query"&&m.isPrimaryKey&&!g.values?S:E(m.name||"")).add(w),!m.isPrimaryKey){if(_!=="count"){var N=_==="query"&&p&&g.values&&u.query(c(c({},g),{values:!1}));return u[_].apply(this,arguments).then(function(I){if(_==="query"){if(p&&g.values)return N.then(function(V){return V=V.result,P.addKeys(V),I});var B=g.values?I.result.map(f):I.result;(g.values?P:S).addKeys(B)}else if(_==="openCursor"){var R=I,M=g.values;return R&&Object.create(R,{key:{get:function(){return S.addKey(R.primaryKey),R.key}},primaryKey:{get:function(){var V=R.primaryKey;return S.addKey(V),V}},value:{get:function(){return M&&P.addKey(R.primaryKey),R.value}}})}return I})}S.add(t)}}return u[_].apply(this,arguments)}}),b}})}};function fo(e,n,t){if(t.numFailures===0)return n;if(n.type==="deleteRange")return null;var r=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;return t.numFailures===r?null:(n=c({},n),K(n.keys)&&(n.keys=n.keys.filter(function(u,a){return!(a in t.failures)})),"values"in n&&K(n.values)&&(n.values=n.values.filter(function(u,a){return!(a in t.failures)})),n)}function pr(e,n){return t=e,((r=n).lower===void 0||(r.lowerOpen?0<Q(t,r.lower):0<=Q(t,r.lower)))&&(e=e,(n=n).upper===void 0||(n.upperOpen?Q(e,n.upper)<0:Q(e,n.upper)<=0));var t,r}function ho(e,n,k,r,u,a){if(!k||k.length===0)return e;var l=n.query.index,f=l.multiEntry,p=n.query.range,y=r.schema.primaryKey.extractKey,b=l.extractKey,d=(l.lowLevelIndex||l).extractKey,k=k.reduce(function(_,g){var w=_,m=[];if(g.type==="add"||g.type==="put")for(var x=new pe,E=g.values.length-1;0<=E;--E){var P,S=g.values[E],N=y(S);x.hasKey(N)||(P=b(S),(f&&K(P)?P.some(function(R){return pr(R,p)}):pr(P,p))&&(x.addKey(N),m.push(S)))}switch(g.type){case"add":var j=new pe().addKeys(n.values?_.map(function(M){return y(M)}):_),w=_.concat(n.values?m.filter(function(M){return M=y(M),!j.hasKey(M)&&(j.addKey(M),!0)}):m.map(function(M){return y(M)}).filter(function(M){return!j.hasKey(M)&&(j.addKey(M),!0)}));break;case"put":var T=new pe().addKeys(g.values.map(function(M){return y(M)}));w=_.filter(function(M){return!T.hasKey(n.values?y(M):M)}).concat(n.values?m:m.map(function(M){return y(M)}));break;case"delete":var I=new pe().addKeys(g.keys);w=_.filter(function(M){return!I.hasKey(n.values?y(M):M)});break;case"deleteRange":var B=g.range;w=_.filter(function(M){return!pr(y(M),B)})}return w},e);return k===e?e:(k.sort(function(_,g){return Q(d(_),d(g))||Q(y(_),y(g))}),n.limit&&n.limit<1/0&&(k.length>n.limit?k.length=n.limit:e.length===n.limit&&k.length<n.limit&&(u.dirty=!0)),a?Object.freeze(k):k)}function po(e,n){return Q(e.lower,n.lower)===0&&Q(e.upper,n.upper)===0&&!!e.lowerOpen==!!n.lowerOpen&&!!e.upperOpen==!!n.upperOpen}function Qi(e,n){return function(t,r,u,a){if(t===void 0)return r!==void 0?-1:0;if(r===void 0)return 1;if((r=Q(t,r))===0){if(u&&a)return 0;if(u)return 1;if(a)return-1}return r}(e.lower,n.lower,e.lowerOpen,n.lowerOpen)<=0&&0<=function(t,r,u,a){if(t===void 0)return r!==void 0?1:0;if(r===void 0)return-1;if((r=Q(t,r))===0){if(u&&a)return 0;if(u)return-1;if(a)return 1}return r}(e.upper,n.upper,e.upperOpen,n.upperOpen)}function Xi(e,n,t,r){e.subscribers.add(t),r.addEventListener("abort",function(){var u,a;e.subscribers.delete(t),e.subscribers.size===0&&(u=e,a=n,setTimeout(function(){u.subscribers.size===0&&Ze(a,u)},3e3))})}var Zi={stack:"dbcore",level:0,name:"Cache",create:function(e){var n=e.schema.name;return c(c({},e),{transaction:function(t,r,u){var a,l,f=e.transaction(t,r,u);return r==="readwrite"&&(l=(a=new AbortController).signal,u=function(p){return function(){if(a.abort(),r==="readwrite"){for(var y=new Set,b=0,d=t;b<d.length;b++){var k=d[b],_=an["idb://".concat(n,"/").concat(k)];if(_){var g=e.table(k),w=_.optimisticOps.filter(function(M){return M.trans===f});if(f._explicit&&p&&f.mutatedParts)for(var m=0,x=Object.values(_.queries.query);m<x.length;m++)for(var E=0,P=(j=x[m]).slice();E<P.length;E++)ar((T=P[E]).obsSet,f.mutatedParts)&&(Ze(j,T),T.subscribers.forEach(function(M){return y.add(M)}));else if(0<w.length){_.optimisticOps=_.optimisticOps.filter(function(M){return M.trans!==f});for(var S=0,N=Object.values(_.queries.query);S<N.length;S++)for(var j,T,I,B=0,R=(j=N[S]).slice();B<R.length;B++)(T=R[B]).res!=null&&f.mutatedParts&&(p&&!T.dirty?(I=Object.isFrozen(T.res),I=ho(T.res,T.req,w,g,T,I),T.dirty?(Ze(j,T),T.subscribers.forEach(function(M){return y.add(M)})):I!==T.res&&(T.res=I,T.promise=q.resolve({result:I}))):(T.dirty&&Ze(j,T),T.subscribers.forEach(function(M){return y.add(M)})))}}}y.forEach(function(M){return M()})}}},f.addEventListener("abort",u(!1),{signal:l}),f.addEventListener("error",u(!1),{signal:l}),f.addEventListener("complete",u(!0),{signal:l})),f},table:function(t){var r=e.table(t),u=r.schema.primaryKey;return c(c({},r),{mutate:function(a){var l=F.trans;if(u.outbound||l.db._options.cache==="disabled"||l.explicit||l.idbtrans.mode!=="readwrite")return r.mutate(a);var f=an["idb://".concat(n,"/").concat(t)];return f?(l=r.mutate(a),a.type!=="add"&&a.type!=="put"||!(50<=a.values.length||dr(u,a).some(function(p){return p==null}))?(f.optimisticOps.push(a),a.mutatedParts&&gt(a.mutatedParts),l.then(function(p){0<p.numFailures&&(Ze(f.optimisticOps,a),(p=fo(0,a,p))&&f.optimisticOps.push(p),a.mutatedParts&&gt(a.mutatedParts))}),l.catch(function(){Ze(f.optimisticOps,a),a.mutatedParts&&gt(a.mutatedParts)})):l.then(function(p){var y=fo(0,c(c({},a),{values:a.values.map(function(b,d){var k;return p.failures[d]?b:(b=(k=u.keyPath)!==null&&k!==void 0&&k.includes(".")?Xe(b):c({},b),de(b,u.keyPath,p.results[d]),b)})}),p);f.optimisticOps.push(y),queueMicrotask(function(){return a.mutatedParts&&gt(a.mutatedParts)})}),l):r.mutate(a)},query:function(a){if(!co(F,r)||!lo("query",a))return r.query(a);var l=((y=F.trans)===null||y===void 0?void 0:y.db._options.cache)==="immutable",d=F,f=d.requery,p=d.signal,y=function(g,w,m,x){var E=an["idb://".concat(g,"/").concat(w)];if(!E)return[];if(!(w=E.queries[m]))return[null,!1,E,null];var P=w[(x.query?x.query.index.name:null)||""];if(!P)return[null,!1,E,null];switch(m){case"query":var S=P.find(function(N){return N.req.limit===x.limit&&N.req.values===x.values&&po(N.req.query.range,x.query.range)});return S?[S,!0,E,P]:[P.find(function(N){return("limit"in N.req?N.req.limit:1/0)>=x.limit&&(!x.values||N.req.values)&&Qi(N.req.query.range,x.query.range)}),!1,E,P];case"count":return S=P.find(function(N){return po(N.req.query.range,x.query.range)}),[S,!!S,E,P]}}(n,t,"query",a),b=y[0],d=y[1],k=y[2],_=y[3];return b&&d?b.obsSet=a.obsSet:(d=r.query(a).then(function(g){var w=g.result;if(b&&(b.res=w),l){for(var m=0,x=w.length;m<x;++m)Object.freeze(w[m]);Object.freeze(w)}else g.result=Xe(w);return g}).catch(function(g){return _&&b&&Ze(_,b),Promise.reject(g)}),b={obsSet:a.obsSet,promise:d,subscribers:new Set,type:"query",req:a,dirty:!1},_?_.push(b):(_=[b],(k=k||(an["idb://".concat(n,"/").concat(t)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[a.query.index.name||""]=_)),Xi(b,_,f,p),b.promise.then(function(g){return{result:ho(g.result,a,k==null?void 0:k.optimisticOps,r,b,l)}})}})}})}};function wt(e,n){return new Proxy(e,{get:function(t,r,u){return r==="db"?n:Reflect.get(t,r,u)}})}var De=(se.prototype.version=function(e){if(isNaN(e)||e<.1)throw new L.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new L.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var n=this._versions,t=n.filter(function(r){return r._cfg.version===e})[0];return t||(t=new this.Version(e),n.push(t),n.sort($i),t.stores({}),this._state.autoSchema=!1,t)},se.prototype._whenReady=function(e){var n=this;return this.idbdb&&(this._state.openComplete||F.letThrough||this._vip)?e():new q(function(t,r){if(n._state.openComplete)return r(new L.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen)return void r(new L.DatabaseClosed);n.open().catch(ee)}n._state.dbReadyPromise.then(t,r)}).then(e)},se.prototype.use=function(e){var n=e.stack,t=e.create,r=e.level,u=e.name;return u&&this.unuse({stack:n,name:u}),e=this._middlewares[n]||(this._middlewares[n]=[]),e.push({stack:n,create:t,level:r??10,name:u}),e.sort(function(a,l){return a.level-l.level}),this},se.prototype.unuse=function(e){var n=e.stack,t=e.name,r=e.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(u){return r?u.create!==r:!!t&&u.name!==t})),this},se.prototype.open=function(){var e=this;return rn(Me,function(){return Vi(e)})},se.prototype._close=function(){var e=this._state,n=mn.indexOf(this);if(0<=n&&mn.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new q(function(t){e.dbReadyResolve=t}),e.openCanceller=new q(function(t,r){e.cancelOpen=r}))},se.prototype.close=function(t){var n=(t===void 0?{disableAutoOpen:!0}:t).disableAutoOpen,t=this._state;n?(t.isBeingOpened&&t.cancelOpen(new L.DatabaseClosed),this._close(),t.autoOpen=!1,t.dbOpenError=new L.DatabaseClosed):(this._close(),t.autoOpen=this._options.autoOpen||t.isBeingOpened,t.openComplete=!1,t.dbOpenError=null)},se.prototype.delete=function(e){var n=this;e===void 0&&(e={disableAutoOpen:!0});var t=0<arguments.length&&typeof arguments[0]!="object",r=this._state;return new q(function(u,a){function l(){n.close(e);var f=n._deps.indexedDB.deleteDatabase(n.name);f.onsuccess=ie(function(){var p,y,b;p=n._deps,y=n.name,b=p.indexedDB,p=p.IDBKeyRange,or(b)||y===ut||rr(b,p).delete(y).catch(ee),u()}),f.onerror=Ce(a),f.onblocked=n._fireOnBlocked}if(t)throw new L.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(l):l()})},se.prototype.backendDB=function(){return this.idbdb},se.prototype.isOpen=function(){return this.idbdb!==null},se.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},se.prototype.hasFailed=function(){return this._state.dbOpenError!==null},se.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(se.prototype,"tables",{get:function(){var e=this;return O(this._allTables).map(function(n){return e._allTables[n]})},enumerable:!1,configurable:!0}),se.prototype.transaction=function(){var e=(function(n,t,r){var u=arguments.length;if(u<2)throw new L.InvalidArgument("Too few arguments");for(var a=new Array(u-1);--u;)a[u-1]=arguments[u];return r=a.pop(),[n,be(a),r]}).apply(this,arguments);return this._transaction.apply(this,e)},se.prototype._transaction=function(e,n,t){var r=this,u=F.trans;u&&u.db===this&&e.indexOf("!")===-1||(u=null);var a,l,f=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(l=n.map(function(y){if(y=y instanceof r.Table?y.name:y,typeof y!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return y}),e=="r"||e===Vt)a=Vt;else{if(e!="rw"&&e!=Wt)throw new L.InvalidArgument("Invalid transaction mode: "+e);a=Wt}if(u){if(u.mode===Vt&&a===Wt){if(!f)throw new L.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");u=null}u&&l.forEach(function(y){if(u&&u.storeNames.indexOf(y)===-1){if(!f)throw new L.SubTransaction("Table "+y+" not included in parent transaction.");u=null}}),f&&u&&!u.active&&(u=null)}}catch(y){return u?u._promise(null,function(b,d){d(y)}):ae(y)}var p=(function y(b,d,k,_,g){return q.resolve().then(function(){var w=F.transless||F,m=b._createTransaction(d,k,b._dbSchema,_);if(m.explicit=!0,w={trans:m,transless:w},_)m.idbtrans=_.idbtrans;else try{m.create(),m.idbtrans._explicit=!0,b._state.PR1398_maxLoop=3}catch(P){return P.name===jt.InvalidState&&b.isOpen()&&0<--b._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),b.close({disableAutoOpen:!1}),b.open().then(function(){return y(b,d,k,null,g)})):ae(P)}var x,E=Dt(g);return E&&vn(),w=q.follow(function(){var P;(x=g.call(m,m))&&(E?(P=$e.bind(null,null),x.then(P,P)):typeof x.next=="function"&&typeof x.throw=="function"&&(x=fr(x)))},w),(x&&typeof x.then=="function"?q.resolve(x).then(function(P){return m.active?P:ae(new L.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):w.then(function(){return x})).then(function(P){return _&&m._resolve(),m._completion.then(function(){return P})}).catch(function(P){return m._reject(P),ae(P)})})}).bind(null,this,a,l,u,t);return u?u._promise(a,p,"lock"):F.trans?rn(F.transless,function(){return r._whenReady(p)}):this._whenReady(p)},se.prototype.table=function(e){if(!C(this._allTables,e))throw new L.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},se);function se(e,n){var t=this;this._middlewares={},this.verno=0;var r=se.dependencies;this._options=n=c({addons:se.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange},r=n.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var u,a,l,f,p,y={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ee,dbReadyPromise:null,cancelOpen:ee,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};y.dbReadyPromise=new q(function(d){y.dbReadyResolve=d}),y.openCanceller=new q(function(d,k){y.cancelOpen=k}),this._state=y,this.name=e,this.on=Dn(this,"populate","blocked","versionchange","close",{ready:[Rt,ee]}),this.on.ready.subscribe=qe(this.on.ready.subscribe,function(d){return function(k,_){se.vip(function(){var g,w=t._state;w.openComplete?(w.dbOpenError||q.resolve().then(k),_&&d(k)):w.onReadyBeingFired?(w.onReadyBeingFired.push(k),_&&d(k)):(d(k),g=t,_||d(function m(){g.on.ready.unsubscribe(k),g.on.ready.unsubscribe(m)}))})}}),this.Collection=(u=this,jn(Di.prototype,function(x,m){this.db=u;var _=Hr,g=null;if(m)try{_=m()}catch(E){g=E}var w=x._ctx,m=w.table,x=m.hook.reading.fire;this._ctx={table:m,index:w.index,isPrimKey:!w.index||m.schema.primKey.keyPath&&w.index===m.schema.primKey.name,range:_,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:g,or:w.or,valueMapper:x!==Kn?x:null}})),this.Table=(a=this,jn(Yr.prototype,function(d,k,_){this.db=a,this._tx=_,this.name=d,this.schema=k,this.hook=a._allTables[d]?a._allTables[d].hook:Dn(null,{creating:[Pi,ee],reading:[Ei,Kn],updating:[Oi,ee],deleting:[Ci,ee]})})),this.Transaction=(l=this,jn(Bi.prototype,function(d,k,_,g,w){var m=this;this.db=l,this.mode=d,this.storeNames=k,this.schema=_,this.chromeTransactionDurability=g,this.idbtrans=null,this.on=Dn(this,"complete","error","abort"),this.parent=w||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new q(function(x,E){m._resolve=x,m._reject=E}),this._completion.then(function(){m.active=!1,m.on.complete.fire()},function(x){var E=m.active;return m.active=!1,m.on.error.fire(x),m.parent?m.parent._reject(x):E&&m.idbtrans&&m.idbtrans.abort(),ae(x)})})),this.Version=(f=this,jn(Hi.prototype,function(d){this.db=f,this._cfg={version:d,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(p=this,jn(Jr.prototype,function(d,k,_){if(this.db=p,this._ctx={table:d,index:k===":id"?null:k,or:_},this._cmp=this._ascending=Q,this._descending=function(g,w){return Q(w,g)},this._max=function(g,w){return 0<Q(g,w)?g:w},this._min=function(g,w){return Q(g,w)<0?g:w},this._IDBKeyRange=p._deps.IDBKeyRange,!this._IDBKeyRange)throw new L.MissingAPI})),this.on("versionchange",function(d){0<d.newVersion?console.warn("Another connection wants to upgrade database '".concat(t.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(t.name,"'. Closing db now to resume the delete request.")),t.close({disableAutoOpen:!1})}),this.on("blocked",function(d){!d.newVersion||d.newVersion<d.oldVersion?console.warn("Dexie.delete('".concat(t.name,"') was blocked")):console.warn("Upgrade '".concat(t.name,"' blocked by other connection holding version ").concat(d.oldVersion/10))}),this._maxKey=Mn(n.IDBKeyRange),this._createTransaction=function(d,k,_,g){return new t.Transaction(d,k,_,t._options.chromeTransactionDurability,g)},this._fireOnBlocked=function(d){t.on("blocked").fire(d),mn.filter(function(k){return k.name===t.name&&k!==t&&!k._state.vcFired}).map(function(k){return k.on("versionchange").fire(d)})},this.use(Yi),this.use(Zi),this.use(Gi),this.use(Wi),this.use(zi);var b=new Proxy(this,{get:function(d,k,_){if(k==="_vip")return!0;if(k==="table")return function(w){return wt(t.table(w),b)};var g=Reflect.get(d,k,_);return g instanceof Yr?wt(g,b):k==="tables"?g.map(function(w){return wt(w,b)}):k==="_createTransaction"?function(){return wt(g.apply(this,arguments),b)}:g}});this.vip=b,r.forEach(function(d){return d(t)})}var kt,ke=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ji=(_r.prototype.subscribe=function(e,n,t){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:t})},_r.prototype[ke]=function(){return this},_r);function _r(e){this._subscribe=e}try{kt={indexedDB:v.indexedDB||v.mozIndexedDB||v.webkitIndexedDB||v.msIndexedDB,IDBKeyRange:v.IDBKeyRange||v.webkitIDBKeyRange}}catch{kt={indexedDB:null,IDBKeyRange:null}}function _o(e){var n,t=!1,r=new Ji(function(u){var a=Dt(e),l,f=!1,p={},y={},b={get closed(){return f},unsubscribe:function(){f||(f=!0,l&&l.abort(),d&&He.storagemutated.unsubscribe(_))}};u.start&&u.start(b);var d=!1,k=function(){return Ht(g)},_=function(w){mt(p,w),ar(y,p)&&k()},g=function(){var w,m,x;!f&&kt.indexedDB&&(p={},w={},l&&l.abort(),l=new AbortController,x=function(E){var P=_n();try{a&&vn();var S=Fe(e,E);return S=a?S.finally($e):S}finally{P&&yn()}}(m={subscr:w,signal:l.signal,requery:k,querier:e,trans:null}),Promise.resolve(x).then(function(E){t=!0,n=E,f||m.signal.aborted||(p={},function(P){for(var S in P)if(C(P,S))return;return 1}(y=w)||d||(He(qn,_),d=!0),Ht(function(){return!f&&u.next&&u.next(E)}))},function(E){t=!1,["DatabaseClosedError","AbortError"].includes(E==null?void 0:E.name)||f||Ht(function(){f||u.error&&u.error(E)})}))};return setTimeout(k,0),b});return r.hasValue=function(){return t},r.getValue=function(){return n},r}var sn=De;function yr(e){var n=Ve;try{Ve=!0,He.storagemutated.fire(e),lr(e,!0)}finally{Ve=n}}X(sn,c(c({},Xn),{delete:function(e){return new sn(e,{addons:[]}).delete()},exists:function(e){return new sn(e,{addons:[]}).open().then(function(n){return n.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return n=sn.dependencies,t=n.indexedDB,n=n.IDBKeyRange,(or(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(u){return u.name}).filter(function(u){return u!==ut})}):rr(t,n).toCollection().primaryKeys()).then(e)}catch{return ae(new L.MissingAPI)}var n,t},defineClass:function(){return function(e){D(this,e)}},ignoreTransaction:function(e){return F.trans?rn(F.transless,e):e()},vip:ir,async:function(e){return function(){try{var n=fr(e.apply(this,arguments));return n&&typeof n.then=="function"?n:q.resolve(n)}catch(t){return ae(t)}}},spawn:function(e,n,t){try{var r=fr(e.apply(t,n||[]));return r&&typeof r.then=="function"?r:q.resolve(r)}catch(u){return ae(u)}},currentTransaction:{get:function(){return F.trans||null}},waitFor:function(e,n){return n=q.resolve(typeof e=="function"?sn.ignoreTransaction(e):e).timeout(n||6e4),F.trans?F.trans.waitFor(n):n},Promise:q,debug:{get:function(){return Pe},set:function(e){Br(e)}},derive:le,extend:D,props:X,override:qe,Events:Dn,on:He,liveQuery:_o,extendObservabilitySet:mt,getByKeyPath:ve,setByKeyPath:de,delByKeyPath:function(e,n){typeof n=="string"?de(e,n,void 0):"length"in n&&[].map.call(n,function(t){de(e,t,void 0)})},shallowClone:Ge,deepClone:Xe,getObjectDiff:hr,cmp:Q,asap:Ye,minKey:-1/0,addons:[],connections:mn,errnames:jt,dependencies:kt,cache:an,semVer:"4.0.9",version:"4.0.9".split(".").map(function(e){return parseInt(e)}).reduce(function(e,n,t){return e+n/Math.pow(10,2*t)})})),sn.maxKey=Mn(sn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(He(qn,function(e){Ve||(e=new CustomEvent(Qt,{detail:e}),Ve=!0,dispatchEvent(e),Ve=!1)}),addEventListener(Qt,function(e){e=e.detail,Ve||yr(e)}));var wn,Ve=!1,yo=function(){};return typeof BroadcastChannel<"u"&&((yo=function(){(wn=new BroadcastChannel(Qt)).onmessage=function(e){return e.data&&yr(e.data)}})(),typeof wn.unref=="function"&&wn.unref(),He(qn,function(e){Ve||wn.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!De.disableBfCache&&e.persisted){Pe&&console.debug("Dexie: handling persisted pagehide"),wn!=null&&wn.close();for(var n=0,t=mn;n<t.length;n++)t[n].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!De.disableBfCache&&e.persisted&&(Pe&&console.debug("Dexie: handling persisted pageshow"),yo(),yr({all:new pe(-1/0,[[]])}))})),q.rejectionMapper=function(e,n){return!e||e instanceof dn||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Rr[e.name]?e:(n=new Rr[e.name](n||e.message,e),"stack"in e&&ne(n,"stack",{get:function(){return this.inner.stack}}),n)},Br(Pe),c(De,Object.freeze({__proto__:null,Dexie:De,liveQuery:_o,Entity:Vr,cmp:Q,PropModSymbol:Ie,PropModification:Rn,replacePrefix:function(e,n){return new Rn({replacePrefix:[e,n]})},add:function(e){return new Rn({add:e})},remove:function(e){return new Rn({remove:e})},default:De,RangeSet:pe,mergeRanges:Ln,rangesOverlap:oo}),{default:De}),De})})(li);var hu=li.exports;const Pr=fu(hu),Io=Symbol.for("Dexie"),St=globalThis[Io]||(globalThis[Io]=Pr);if(Pr.semVer!==St.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Pr.semVer} and ${St.semVer}`);const{liveQuery:du,mergeRanges:ia,rangesOverlap:ua,RangeSet:aa,cmp:sa,Entity:ca,PropModSymbol:la,PropModification:fa,replacePrefix:ha,add:da,remove:pa}=St;function Cr(o,i){for(var s in o)if(s!=="__source"&&!(s in i))return!0;for(var c in i)if(c!=="__source"&&o[c]!==i[c])return!0;return!1}function Or(o,i){this.props=o,this.context=i}function pu(o,i){function s(h){var v=this.props.ref,O=v==h.ref;return!O&&v&&(v.call?v(null):v.current=null),i?!i(this.props,h)||!O:Cr(this.props,h)}function c(h){return this.shouldComponentUpdate=s,Be(o,h)}return c.displayName="Memo("+(o.displayName||o.name)+")",c.prototype.isReactComponent=!0,c.__f=!0,c}(Or.prototype=new Ke).isPureReactComponent=!0,Or.prototype.shouldComponentUpdate=function(o,i){return Cr(this.props,o)||Cr(this.state,i)};var Do=W.__b;W.__b=function(o){o.type&&o.type.__f&&o.ref&&(o.props.ref=o.ref,o.ref=null),Do&&Do(o)};var _u=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function yu(o){function i(s){if(!("ref"in s))return o(s,null);var c=s.ref;delete s.ref;var h=o(s,c);return s.ref=c,h}return i.$$typeof=_u,i.render=i,i.prototype.isReactComponent=i.__f=!0,i.displayName="ForwardRef("+(o.displayName||o.name)+")",i}var jo=function(o,i){return o==null?null:Re(Re(o).map(i))},vu={map:jo,forEach:jo,count:function(o){return o?Re(o).length:0},only:function(o){var i=Re(o);if(i.length!==1)throw"Children.only";return i[0]},toArray:Re},mu=W.__e;W.__e=function(o,i,s,c){if(o.then){for(var h,v=i;v=v.__;)if((h=v.__c)&&h.__c)return i.__e==null&&(i.__e=s.__e,i.__k=s.__k),h.__c(o,i)}mu(o,i,s,c)};var Ro=W.unmount;function fi(o,i,s){return o&&(o.__c&&o.__c.__H&&(o.__c.__H.__.forEach(function(c){typeof c.__c=="function"&&c.__c()}),o.__c.__H=null),(o=function(c,h){for(var v in h)c[v]=h[v];return c}({},o)).__c!=null&&(o.__c.__P===s&&(o.__c.__P=i),o.__c=null),o.__k=o.__k&&o.__k.map(function(c){return fi(c,i,s)})),o}function hi(o,i,s){return o&&s&&(o.__v=null,o.__k=o.__k&&o.__k.map(function(c){return hi(c,i,s)}),o.__c&&o.__c.__P===i&&(o.__e&&s.appendChild(o.__e),o.__c.__e=!0,o.__c.__P=s)),o}function Ct(){this.__u=0,this.t=null,this.__b=null}function di(o){var i=o.__.__c;return i&&i.__a&&i.__a(o)}function gu(o){var i,s,c;function h(v){if(i||(i=o()).then(function(O){s=O.default||O},function(O){c=O}),c)throw c;if(!s)throw i;return Be(s,v)}return h.displayName="Lazy",h.__f=!0,h}function Hn(){this.u=null,this.o=null}W.unmount=function(o){var i=o.__c;i&&i.__R&&i.__R(),i&&32&o.__u&&(o.type=null),Ro&&Ro(o)},(Ct.prototype=new Ke).__c=function(o,i){var s=i.__c,c=this;c.t==null&&(c.t=[]),c.t.push(s);var h=di(c.__v),v=!1,O=function(){v||(v=!0,s.__R=null,h?h(K):K())};s.__R=O;var K=function(){if(!--c.__u){if(c.state.__a){var D=c.state.__a;c.__v.__k[0]=hi(D,D.__c.__P,D.__c.__O)}var A;for(c.setState({__a:c.__b=null});A=c.t.pop();)A.forceUpdate()}};c.__u++||32&i.__u||c.setState({__a:c.__b=c.__v.__k[0]}),o.then(O,O)},Ct.prototype.componentWillUnmount=function(){this.t=[]},Ct.prototype.render=function(o,i){if(this.__b){if(this.__v.__k){var s=document.createElement("div"),c=this.__v.__k[0].__c;this.__v.__k[0]=fi(this.__b,s,c.__O=c.__P)}this.__b=null}var h=i.__a&&Be(Ae,null,o.fallback);return h&&(h.__u&=-33),[Be(Ae,null,i.__a?null:o.children),h]};var Bo=function(o,i,s){if(++s[1]===s[0]&&o.o.delete(i),o.props.revealOrder&&(o.props.revealOrder[0]!=="t"||!o.o.size))for(s=o.u;s;){for(;s.length>3;)s.pop()();if(s[1]<s[0])break;o.u=s=s[2]}};function bu(o){return this.getChildContext=function(){return o.context},o.children}function wu(o){var i=this,s=o.i;i.componentWillUnmount=function(){xn(null,i.l),i.l=null,i.i=null},i.i&&i.i!==s&&i.componentWillUnmount(),i.l||(i.i=s,i.l={nodeType:1,parentNode:s,childNodes:[],contains:function(){return!0},appendChild:function(c){this.childNodes.push(c),i.i.appendChild(c)},insertBefore:function(c,h){this.childNodes.push(c),i.i.appendChild(c)},removeChild:function(c){this.childNodes.splice(this.childNodes.indexOf(c)>>>1,1),i.i.removeChild(c)}}),xn(Be(bu,{context:i.context},o.__v),i.l)}function ku(o,i){var s=Be(wu,{__v:o,i});return s.containerInfo=i,s}(Hn.prototype=new Ke).__a=function(o){var i=this,s=di(i.__v),c=i.o.get(o);return c[0]++,function(h){var v=function(){i.props.revealOrder?(c.push(h),Bo(i,o,c)):h()};s?s(v):v()}},Hn.prototype.render=function(o){this.u=null,this.o=new Map;var i=Re(o.children);o.revealOrder&&o.revealOrder[0]==="b"&&i.reverse();for(var s=i.length;s--;)this.o.set(i[s],this.u=[1,0,this.u]);return o.children},Hn.prototype.componentDidUpdate=Hn.prototype.componentDidMount=function(){var o=this;this.o.forEach(function(i,s){Bo(o,s,i)})};var pi=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,xu=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Eu=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Pu=/[A-Z0-9]/g,Cu=typeof document<"u",Ou=function(o){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(o)};function Su(o,i,s){return i.__k==null&&(i.textContent=""),xn(o,i),typeof s=="function"&&s(),o?o.__c:null}function Ku(o,i,s){return ei(o,i),typeof s=="function"&&s(),o?o.__c:null}Ke.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(o){Object.defineProperty(Ke.prototype,o,{configurable:!0,get:function(){return this["UNSAFE_"+o]},set:function(i){Object.defineProperty(this,o,{configurable:!0,writable:!0,value:i})}})});var qo=W.event;function Au(){}function Nu(){return this.cancelBubble}function Tu(){return this.defaultPrevented}W.event=function(o){return qo&&(o=qo(o)),o.persist=Au,o.isPropagationStopped=Nu,o.isDefaultPrevented=Tu,o.nativeEvent=o};var Dr,Iu={enumerable:!1,configurable:!0,get:function(){return this.class}},Mo=W.vnode;W.vnode=function(o){typeof o.type=="string"&&function(i){var s=i.props,c=i.type,h={},v=c.indexOf("-")===-1;for(var O in s){var K=s[O];if(!(O==="value"&&"defaultValue"in s&&K==null||Cu&&O==="children"&&c==="noscript"||O==="class"||O==="className")){var D=O.toLowerCase();O==="defaultValue"&&"value"in s&&s.value==null?O="value":O==="download"&&K===!0?K="":D==="translate"&&K==="no"?K=!1:D[0]==="o"&&D[1]==="n"?D==="ondoubleclick"?O="ondblclick":D!=="onchange"||c!=="input"&&c!=="textarea"||Ou(s.type)?D==="onfocus"?O="onfocusin":D==="onblur"?O="onfocusout":Eu.test(O)&&(O=D):D=O="oninput":v&&xu.test(O)?O=O.replace(Pu,"-$&").toLowerCase():K===null&&(K=void 0),D==="oninput"&&h[O=D]&&(O="oninputCapture"),h[O]=K}}c=="select"&&h.multiple&&Array.isArray(h.value)&&(h.value=Re(s.children).forEach(function(A){A.props.selected=h.value.indexOf(A.props.value)!=-1})),c=="select"&&h.defaultValue!=null&&(h.value=Re(s.children).forEach(function(A){A.props.selected=h.multiple?h.defaultValue.indexOf(A.props.value)!=-1:h.defaultValue==A.props.value})),s.class&&!s.className?(h.class=s.class,Object.defineProperty(h,"className",Iu)):(s.className&&!s.class||s.class&&s.className)&&(h.class=h.className=s.className),i.props=h}(o),o.$$typeof=pi,Mo&&Mo(o)};var Fo=W.__r;W.__r=function(o){Fo&&Fo(o),Dr=o.__c};var $o=W.diffed;W.diffed=function(o){$o&&$o(o);var i=o.props,s=o.__e;s!=null&&o.type==="textarea"&&"value"in i&&i.value!==s.value&&(s.value=i.value==null?"":i.value),Dr=null};var Du={ReactCurrentDispatcher:{current:{readContext:function(o){return Dr.__n[o.__c].props.value},useCallback:oi,useContext:ii,useDebugValue:ui,useDeferredValue:yi,useEffect:Yn,useId:ai,useImperativeHandle:ri,useInsertionEffect:mi,useLayoutEffect:Gn,useMemo:At,useReducer:Nr,useRef:ti,useState:Ee,useSyncExternalStore:gi,useTransition:vi}}};function ju(o){return Be.bind(null,o)}function Nt(o){return!!o&&o.$$typeof===pi}function Ru(o){return Nt(o)&&o.type===Ae}function Bu(o){return!!o&&!!o.displayName&&(typeof o.displayName=="string"||o.displayName instanceof String)&&o.displayName.startsWith("Memo(")}function qu(o){return Nt(o)?uu.apply(null,arguments):o}function Mu(o){return!!o.__k&&(xn(null,o),!0)}function Fu(o){return o&&(o.base||o.nodeType===1&&o)||null}var $u=function(o,i){return o(i)},Lu=function(o,i){return o(i)},Uu=Ae;function _i(o){o()}function yi(o){return o}function vi(){return[!1,_i]}var mi=Gn,Hu=Nt;function gi(o,i){var s=i(),c=Ee({h:{__:s,v:i}}),h=c[0].h,v=c[1];return Gn(function(){h.__=s,h.v=i,gr(h)&&v({h})},[o,s,i]),Yn(function(){return gr(h)&&v({h}),o(function(){gr(h)&&v({h})})},[o]),s}function gr(o){var i,s,c=o.v,h=o.__;try{var v=c();return!((i=h)===(s=v)&&(i!==0||1/i==1/s)||i!=i&&s!=s)}catch{return!0}}var Un={useState:Ee,useId:ai,useReducer:Nr,useEffect:Yn,useLayoutEffect:Gn,useInsertionEffect:mi,useTransition:vi,useDeferredValue:yi,useSyncExternalStore:gi,startTransition:_i,useRef:ti,useImperativeHandle:ri,useMemo:At,useCallback:oi,useContext:ii,useDebugValue:ui,version:"18.3.1",Children:vu,render:Su,hydrate:Ku,unmountComponentAtNode:Mu,createPortal:ku,createElement:Be,createContext:au,createFactory:ju,cloneElement:qu,createRef:nu,Fragment:Ae,isValidElement:Nt,isElement:Hu,isFragment:Ru,isMemo:Bu,findDOMNode:Fu,Component:Ke,PureComponent:Or,memo:pu,forwardRef:yu,flushSync:Lu,unstable_batchedUpdates:$u,StrictMode:Uu,Suspense:Ct,SuspenseList:Hn,lazy:gu,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Du};function Vu(o,i,s){var c,h;typeof o=="function"?(c=i||[],h=s):(c=[],h=i);var v=Un.useRef({hasResult:!1,result:h,error:null}),O=Un.useReducer(function(A){return A+1},0);O[0];var K=O[1],D=Un.useMemo(function(){var A=typeof o=="function"?o():o;if(!A||typeof A.subscribe!="function")throw o===A?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!v.current.hasResult&&typeof window<"u"&&(typeof A.hasValue!="function"||A.hasValue()))if(typeof A.getValue=="function")v.current.result=A.getValue(),v.current.hasResult=!0;else{var H=A.subscribe(function(C){v.current.result=C,v.current.hasResult=!0});typeof H=="function"?H():H.unsubscribe()}return A},c);if(Un.useDebugValue(v.current.result),Un.useEffect(function(){var A=D.subscribe(function(H){var C=v.current;(C.error!==null||C.result!==H)&&(C.error=null,C.result=H,C.hasResult=!0,K())},function(H){var C=v.current;C.error!==H&&(C.error=H,K())});return typeof A=="function"?A:A.unsubscribe.bind(A)},c),v.current.error)throw v.current.error;return v.current.result}function Lo(o,i,s){return Vu(function(){return du(o)},i||[],s)}var Se;class Wu{constructor(){go(this,Se);bo(this,Se,new St("ShoppingItemStorage")),ln(this,Se).version(1).stores({shoppingItems:"++id, name, category, checked"})}async addItem({name:i,categoryName:s,checked:c}){try{const h=await ln(this,Se).shoppingItems.add({name:i,categoryName:s,checked:c})}catch(h){console.error(`Failed to add item ${i}: ${h}`)}}getAllItems(){return Lo(()=>ln(this,Se).shoppingItems.toArray())}getAllLikeName(i){return i==""?null:Lo(async()=>await ln(this,Se).shoppingItems.where("name").startsWith(i).toArray(),[i])}async updateItem(i,{name:s,categoryName:c,checked:h}){await ln(this,Se).shoppingItems.put({id:i,name:s,categoryName:c,checked:h})}async deleteItem(i){await ln(this,Se).shoppingItems.delete(i)}}Se=new WeakMap;const Pn=new Wu;function zu({id:o,name:i,categoryName:s,checked:c,onEdit:h}){let[v,O]=Ee(c),K;return ci.forEach(A=>{A.name==s&&(K=A.iconName)}),$("div",{class:"ShoppingItemCard",children:[$("div",{class:"content",children:[$("h2",{class:`${v?"checked":""}`,children:i}),$(Ir,{iconName:K})]}),$("div",{class:"buttons",children:[$(We,{iconName:"check",onClick:()=>{O(!v),Pn.updateItem(o,{name:i,categoryName:s,checked:!c})}}),$(We,{iconName:"edit",onClick:()=>h({id:o,name:i,categoryName:s,checked:c})}),$(We,{iconName:"delete",onClick:()=>Pn.deleteItem(o)})]})]})}function Yu({onAddClick:o,onEditItem:i}){let s=Pn.getAllItems();return $("div",{class:"ShoppingItemList",children:[(!s||(s==null?void 0:s.length)===0)&&$("div",{class:"emptyList",children:["No items yet. You can start adding them by pressing this button.",$(We,{iconName:"add",onClick:o})]}),s&&s.length>0&&$(Ae,{children:[$("div",{class:"list",children:s.map(c=>$(zu,{id:c.id,name:c.name,categoryName:c.categoryName,checked:c.checked,onEdit:()=>i(c)}))}),$("div",{class:"bottombar",children:$(We,{iconName:"add",onClick:o})})]})]})}function Gu(){let[o,i]=Ee("dark_mode");return $("div",{class:"DarkThemeControl",children:$(We,{iconName:o,onClick:()=>(document.documentElement.classList.toggle("theme-light"),localStorage.theme=localStorage.theme?"":"theme-light",i(localStorage.theme==""?"light_mode":"dark_mode"))})})}function Qu(){let[o,i]=Ee(""),s=Pn.getAllLikeName(o);return console.log(s),$("div",{class:"ItemSearch",children:[$("input",{type:"search",placeholder:"Search",value:o,onChange:c=>i(c.currentTarget.value)}),s&&$("div",{class:"results",children:s.map(c=>$("p",{children:c.name}))})]})}function Xu(){return $("div",{class:"TopBar",children:[$("div",{class:"title",children:[$("h1",{children:"Shopping List"}),$(Gu,{})]}),$("div",{class:"search",children:$(Qu,{})})]})}function Zu({value:o,onChange:i,type:s,placeholder:c,onEnter:h,autofocus:v}){return $("div",{class:"TextInput",children:[$("input",{type:s,value:o,onInput:O=>i(O.currentTarget.value),autofocus:v,onKeyDown:h?O=>{O.key==="Enter"&&h()}:void 0}),$("label",{class:o?"subsided":void 0,children:c})]})}function Ju({onClick:o,isChosen:i,...s}){return $("div",{class:`ShoppingCategory ${i?"chosen":""}`,children:$("button",{type:"button",onClick:()=>o(s.name),children:[$(Ir,{iconName:s.iconName}),s.name]})})}function ea({onCategoryClick:o,selectedCategory:i}){let[s,c]=Ee(i||"");return Yn(()=>{c(i||"")},[i]),$("div",{className:"CategoryChooser",children:ci.map(h=>$(Ju,{name:h.name,iconName:h.iconName,isChosen:h.name==s,onClick:()=>{c(h.name),o(h.name)}}))})}function na({isOpen:o,onClose:i,editedItem:s}){if(!o)return null;let c=s?"Edit item":"New item",[h,v]=Ee(s?s.name:""),[O,K]=Ee(s?s.categoryName:"");Yn(()=>{s?(v(s.name),K(s.categoryName)):(v(""),K(""))},[s]);let D=()=>{v(""),K("")};return $("div",{class:"ItemEditor",children:[$("div",{class:"top",children:[$("h2",{children:c}),$(We,{iconName:"close",onClick:i})]}),$("div",{class:"content",children:[$("div",{class:"nameInput",children:$(Zu,{placeholder:"Item name",value:h,onChange:v,onEnter:()=>{}})}),$(ea,{onCategoryClick:K,selectedCategory:O})]}),$("div",{class:"bottom",children:$(We,{iconName:"check",onClick:()=>{s?Pn.updateItem(s.id,{name:h,categoryName:O,checked:s.checked}):Pn.addItem({name:h,categoryName:O,checked:!1}),D(),i()}})})]})}function ta(){let[o,i]=Ee(!1),[s,c]=Ee(null);return $("div",{class:"Main",children:[$(Xu,{}),$(Yu,{onAddClick:()=>i(!0),onEditItem:O=>{c(O),i(!0)}}),$(na,{isOpen:o,onClose:()=>{c(null),i(!1)},editedItem:s})]})}function ra(){return $(ta,{})}xn($(ra,{}),document.getElementById("app"));let Uo=localStorage.theme;Uo!=""&&document.documentElement.classList.toggle(Uo);
